    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;KCPSM3 Program - SPI Control of Amplifier and A/D converter on Spartan-3E Starter Kit.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Ken Chapman - Xilinx Ltd
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Version v1.00 - 21th December 2005
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;This program uses an 8KHz interrupt to generate test waveforms on the
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;4 analogue outputs provided by the Linear Technology LTC2624 device.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;As well as the port connections vital to communication with the UART and the SPI
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;FLASH memory, there are additional port connections used to disable the other
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;devices sharing the SPI bus on the Starter Kit board. Although these could have been
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;controlled at the hardware level, they are included in this code to aid
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;future investigations of communication with the other SPI devices using PicoBlaze.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Connections to the LEDs, switches and press buttons are provided to aid
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;development and enable further experiments. Otherwise know as having fun!
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Port definitions
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_control_port, 08
  LOGFORMAT-CONSTANT SPI_control_port, 08
INSTRUCTION-CONSTANT
   OPERAND1-SPI_control_port
  OP1 VALUE-SPI_control_port
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;SPI clock and chip selects
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_sck, 01
  LOGFORMAT-CONSTANT SPI_sck, 01
INSTRUCTION-CONSTANT
   OPERAND1-SPI_sck
  OP1 VALUE-SPI_sck
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;                  SCK - bit0
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_rom_cs, 02
  LOGFORMAT-CONSTANT SPI_rom_cs, 02
INSTRUCTION-CONSTANT
   OPERAND1-SPI_rom_cs
  OP1 VALUE-SPI_rom_cs
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-;    serial rom select - bit1
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_spare_control, 04
  LOGFORMAT-CONSTANT SPI_spare_control, 04
INSTRUCTION-CONSTANT
   OPERAND1-SPI_spare_control
  OP1 VALUE-SPI_spare_control
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-;                spare - bit2
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_amp_cs, 08
  LOGFORMAT-CONSTANT SPI_amp_cs, 08
INSTRUCTION-CONSTANT
   OPERAND1-SPI_amp_cs
  OP1 VALUE-SPI_amp_cs
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;     amplifier select - bit3
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_adc_conv, 10
  LOGFORMAT-CONSTANT SPI_adc_conv, 10
INSTRUCTION-CONSTANT
   OPERAND1-SPI_adc_conv
  OP1 VALUE-SPI_adc_conv
   OPERAND2-10
  OP2 VALUE-10
    COMMENT-;          A/D convert - bit4
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_dac_cs, 20
  LOGFORMAT-CONSTANT SPI_dac_cs, 20
INSTRUCTION-CONSTANT
   OPERAND1-SPI_dac_cs
  OP1 VALUE-SPI_dac_cs
   OPERAND2-20
  OP2 VALUE-20
    COMMENT-;           D/A select - bit5
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_amp_shdn, 40
  LOGFORMAT-CONSTANT SPI_amp_shdn, 40
INSTRUCTION-CONSTANT
   OPERAND1-SPI_amp_shdn
  OP1 VALUE-SPI_amp_shdn
   OPERAND2-40
  OP2 VALUE-40
    COMMENT-;       amplifier SHDN - bit6
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_dac_clr, 80
  LOGFORMAT-CONSTANT SPI_dac_clr, 80
INSTRUCTION-CONSTANT
   OPERAND1-SPI_dac_clr
  OP1 VALUE-SPI_dac_clr
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;            D/A clear - bit7
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_output_port, 04
  LOGFORMAT-CONSTANT SPI_output_port, 04
INSTRUCTION-CONSTANT
   OPERAND1-SPI_output_port
  OP1 VALUE-SPI_output_port
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-;SPI data output
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_sdo, 80
  LOGFORMAT-CONSTANT SPI_sdo, 80
INSTRUCTION-CONSTANT
   OPERAND1-SPI_sdo
  OP1 VALUE-SPI_sdo
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;   SDO - bit7
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_input_port, 01
  LOGFORMAT-CONSTANT SPI_input_port, 01
INSTRUCTION-CONSTANT
   OPERAND1-SPI_input_port
  OP1 VALUE-SPI_input_port
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;SPI data input
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_sdi, 80
  LOGFORMAT-CONSTANT SPI_sdi, 80
INSTRUCTION-CONSTANT
   OPERAND1-SPI_sdi
  OP1 VALUE-SPI_sdi
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;             SDI - bit7
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SPI_amp_sdi, 40
  LOGFORMAT-CONSTANT SPI_amp_sdi, 40
INSTRUCTION-CONSTANT
   OPERAND1-SPI_amp_sdi
  OP1 VALUE-SPI_amp_sdi
   OPERAND2-40
  OP2 VALUE-40
    COMMENT-;   amplifier SDI - bit6
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED_port, 80
  LOGFORMAT-CONSTANT LED_port, 80
INSTRUCTION-CONSTANT
   OPERAND1-LED_port
  OP1 VALUE-LED_port
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;8 simple LEDs
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED0, 01
  LOGFORMAT-CONSTANT LED0, 01
INSTRUCTION-CONSTANT
   OPERAND1-LED0
  OP1 VALUE-LED0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;     LED 0 - bit0
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED1, 02
  LOGFORMAT-CONSTANT LED1, 02
INSTRUCTION-CONSTANT
   OPERAND1-LED1
  OP1 VALUE-LED1
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-;         1 - bit1
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED2, 04
  LOGFORMAT-CONSTANT LED2, 04
INSTRUCTION-CONSTANT
   OPERAND1-LED2
  OP1 VALUE-LED2
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-;         2 - bit2
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED3, 08
  LOGFORMAT-CONSTANT LED3, 08
INSTRUCTION-CONSTANT
   OPERAND1-LED3
  OP1 VALUE-LED3
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;         3 - bit3
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED4, 10
  LOGFORMAT-CONSTANT LED4, 10
INSTRUCTION-CONSTANT
   OPERAND1-LED4
  OP1 VALUE-LED4
   OPERAND2-10
  OP2 VALUE-10
    COMMENT-;         4 - bit4
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED5, 20
  LOGFORMAT-CONSTANT LED5, 20
INSTRUCTION-CONSTANT
   OPERAND1-LED5
  OP1 VALUE-LED5
   OPERAND2-20
  OP2 VALUE-20
    COMMENT-;         5 - bit5
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED6, 40
  LOGFORMAT-CONSTANT LED6, 40
INSTRUCTION-CONSTANT
   OPERAND1-LED6
  OP1 VALUE-LED6
   OPERAND2-40
  OP2 VALUE-40
    COMMENT-;         6 - bit6
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED7, 80
  LOGFORMAT-CONSTANT LED7, 80
INSTRUCTION-CONSTANT
   OPERAND1-LED7
  OP1 VALUE-LED7
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;         7 - bit7
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT switch_port, 00
  LOGFORMAT-CONSTANT switch_port, 00
INSTRUCTION-CONSTANT
   OPERAND1-switch_port
  OP1 VALUE-switch_port
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;Read switches and press buttons
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT BTN_north, 01
  LOGFORMAT-CONSTANT BTN_north, 01
INSTRUCTION-CONSTANT
   OPERAND1-BTN_north
  OP1 VALUE-BTN_north
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;  Buttons     North - bit0
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT BTN_east, 02
  LOGFORMAT-CONSTANT BTN_east, 02
INSTRUCTION-CONSTANT
   OPERAND1-BTN_east
  OP1 VALUE-BTN_east
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-;               East - bit1
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT BTN_south, 04
  LOGFORMAT-CONSTANT BTN_south, 04
INSTRUCTION-CONSTANT
   OPERAND1-BTN_south
  OP1 VALUE-BTN_south
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-;              South - bit2
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT BTN_west, 08
  LOGFORMAT-CONSTANT BTN_west, 08
INSTRUCTION-CONSTANT
   OPERAND1-BTN_west
  OP1 VALUE-BTN_west
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;               West - bit3
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT switch0, 10
  LOGFORMAT-CONSTANT switch0, 10
INSTRUCTION-CONSTANT
   OPERAND1-switch0
  OP1 VALUE-switch0
   OPERAND2-10
  OP2 VALUE-10
    COMMENT-;  Switches        0 - bit4
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT switch1, 20
  LOGFORMAT-CONSTANT switch1, 20
INSTRUCTION-CONSTANT
   OPERAND1-switch1
  OP1 VALUE-switch1
   OPERAND2-20
  OP2 VALUE-20
    COMMENT-;                  1 - bit5
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT switch2, 40
  LOGFORMAT-CONSTANT switch2, 40
INSTRUCTION-CONSTANT
   OPERAND1-switch2
  OP1 VALUE-switch2
   OPERAND2-40
  OP2 VALUE-40
    COMMENT-;                  2 - bit6
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT switch3, 80
  LOGFORMAT-CONSTANT switch3, 80
INSTRUCTION-CONSTANT
   OPERAND1-switch3
  OP1 VALUE-switch3
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;                  3 - bit7
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LCD interface ports
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The master enable signal is not used by the LCD display itself
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;but may be required to confirm that LCD communication is active.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;This is required on the Spartan-3E Starter Kit if the StrataFLASH
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;is used because it shares the same data pins and conflicts must be avoided.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_output_port, 40
  LOGFORMAT-CONSTANT LCD_output_port, 40
INSTRUCTION-CONSTANT
   OPERAND1-LCD_output_port
  OP1 VALUE-LCD_output_port
   OPERAND2-40
  OP2 VALUE-40
    COMMENT-;LCD character module output data and control
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_E, 01
  LOGFORMAT-CONSTANT LCD_E, 01
INSTRUCTION-CONSTANT
   OPERAND1-LCD_E
  OP1 VALUE-LCD_E
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;   active High Enable        E - bit0
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_RW, 02
  LOGFORMAT-CONSTANT LCD_RW, 02
INSTRUCTION-CONSTANT
   OPERAND1-LCD_RW
  OP1 VALUE-LCD_RW
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-;   Read=1 Write=0           RW - bit1
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_RS, 04
  LOGFORMAT-CONSTANT LCD_RS, 04
INSTRUCTION-CONSTANT
   OPERAND1-LCD_RS
  OP1 VALUE-LCD_RS
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-;   Instruction=0 Data=1     RS - bit2
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_drive, 08
  LOGFORMAT-CONSTANT LCD_drive, 08
INSTRUCTION-CONSTANT
   OPERAND1-LCD_drive
  OP1 VALUE-LCD_drive
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;   Master enable (active High) - bit3
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_DB4, 10
  LOGFORMAT-CONSTANT LCD_DB4, 10
INSTRUCTION-CONSTANT
   OPERAND1-LCD_DB4
  OP1 VALUE-LCD_DB4
   OPERAND2-10
  OP2 VALUE-10
    COMMENT-;   4-bit              Data DB4 - bit4
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_DB5, 20
  LOGFORMAT-CONSTANT LCD_DB5, 20
INSTRUCTION-CONSTANT
   OPERAND1-LCD_DB5
  OP1 VALUE-LCD_DB5
   OPERAND2-20
  OP2 VALUE-20
    COMMENT-;   interface          Data DB5 - bit5
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_DB6, 40
  LOGFORMAT-CONSTANT LCD_DB6, 40
INSTRUCTION-CONSTANT
   OPERAND1-LCD_DB6
  OP1 VALUE-LCD_DB6
   OPERAND2-40
  OP2 VALUE-40
    COMMENT-;                      Data DB6 - bit6
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_DB7, 80
  LOGFORMAT-CONSTANT LCD_DB7, 80
INSTRUCTION-CONSTANT
   OPERAND1-LCD_DB7
  OP1 VALUE-LCD_DB7
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;                      Data DB7 - bit7
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_input_port, 02
  LOGFORMAT-CONSTANT LCD_input_port, 02
INSTRUCTION-CONSTANT
   OPERAND1-LCD_input_port
  OP1 VALUE-LCD_input_port
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-;LCD character module input data
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_read_spare0, 01
  LOGFORMAT-CONSTANT LCD_read_spare0, 01
INSTRUCTION-CONSTANT
   OPERAND1-LCD_read_spare0
  OP1 VALUE-LCD_read_spare0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;    Spare bits               - bit0
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_read_spare1, 02
  LOGFORMAT-CONSTANT LCD_read_spare1, 02
INSTRUCTION-CONSTANT
   OPERAND1-LCD_read_spare1
  OP1 VALUE-LCD_read_spare1
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-;    are zero                 - bit1
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_read_spare2, 04
  LOGFORMAT-CONSTANT LCD_read_spare2, 04
INSTRUCTION-CONSTANT
   OPERAND1-LCD_read_spare2
  OP1 VALUE-LCD_read_spare2
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-;                             - bit2
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_read_spare3, 08
  LOGFORMAT-CONSTANT LCD_read_spare3, 08
INSTRUCTION-CONSTANT
   OPERAND1-LCD_read_spare3
  OP1 VALUE-LCD_read_spare3
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;                             - bit3
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_read_DB4, 10
  LOGFORMAT-CONSTANT LCD_read_DB4, 10
INSTRUCTION-CONSTANT
   OPERAND1-LCD_read_DB4
  OP1 VALUE-LCD_read_DB4
   OPERAND2-10
  OP2 VALUE-10
    COMMENT-;    4-bit           Data DB4 - bit4
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_read_DB5, 20
  LOGFORMAT-CONSTANT LCD_read_DB5, 20
INSTRUCTION-CONSTANT
   OPERAND1-LCD_read_DB5
  OP1 VALUE-LCD_read_DB5
   OPERAND2-20
  OP2 VALUE-20
    COMMENT-;    interface       Data DB5 - bit5
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_read_DB6, 40
  LOGFORMAT-CONSTANT LCD_read_DB6, 40
INSTRUCTION-CONSTANT
   OPERAND1-LCD_read_DB6
  OP1 VALUE-LCD_read_DB6
   OPERAND2-40
  OP2 VALUE-40
    COMMENT-;                    Data DB6 - bit6
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LCD_read_DB7, 80
  LOGFORMAT-CONSTANT LCD_read_DB7, 80
INSTRUCTION-CONSTANT
   OPERAND1-LCD_read_DB7
  OP1 VALUE-LCD_read_DB7
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;                    Data DB7 - bit7
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Special Register usage
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Scratch Pad Memory Locations
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Values read from the A/D converter
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT ADC0_lsb, 00
  LOGFORMAT-CONSTANT ADC0_lsb, 00
INSTRUCTION-CONSTANT
   OPERAND1-ADC0_lsb
  OP1 VALUE-ADC0_lsb
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;ADC Channel 0 value LS-Byte
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT ADC0_msb, 01
  LOGFORMAT-CONSTANT ADC0_msb, 01
INSTRUCTION-CONSTANT
   OPERAND1-ADC0_msb
  OP1 VALUE-ADC0_msb
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;                    MS-Byte
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT ADC1_lsb, 02
  LOGFORMAT-CONSTANT ADC1_lsb, 02
INSTRUCTION-CONSTANT
   OPERAND1-ADC1_lsb
  OP1 VALUE-ADC1_lsb
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-;ADC Channel 1 value LS-Byte
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT ADC1_msb, 03
  LOGFORMAT-CONSTANT ADC1_msb, 03
INSTRUCTION-CONSTANT
   OPERAND1-ADC1_msb
  OP1 VALUE-ADC1_msb
   OPERAND2-03
  OP2 VALUE-03
    COMMENT-;                    MS-Byte
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Amplifier gain settings.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Stored value is the 4-bit code for gain setting
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  Code  1   2   3    4     5    6     7
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  Gain -1  -2  -5  -10   -20  -50  -100
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT amp_A_gain, 04
  LOGFORMAT-CONSTANT amp_A_gain, 04
INSTRUCTION-CONSTANT
   OPERAND1-amp_A_gain
  OP1 VALUE-amp_A_gain
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-;Amplifier A gain value
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT amp_B_gain, 05
  LOGFORMAT-CONSTANT amp_B_gain, 05
INSTRUCTION-CONSTANT
   OPERAND1-amp_B_gain
  OP1 VALUE-amp_B_gain
   OPERAND2-05
  OP2 VALUE-05
    COMMENT-;Amplifier B gain value
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Sample counter used to give activity indication on LEDs
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT sample_count, 06
  LOGFORMAT-CONSTANT sample_count, 06
INSTRUCTION-CONSTANT
   OPERAND1-sample_count
  OP1 VALUE-sample_count
   OPERAND2-06
  OP2 VALUE-06
    COMMENT-;8-bit counter LS-Byte
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT decimal0, 07
  LOGFORMAT-CONSTANT decimal0, 07
INSTRUCTION-CONSTANT
   OPERAND1-decimal0
  OP1 VALUE-decimal0
   OPERAND2-07
  OP2 VALUE-07
    COMMENT-;5 digit decimal value
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT decimal1, 08
  LOGFORMAT-CONSTANT decimal1, 08
INSTRUCTION-CONSTANT
   OPERAND1-decimal1
  OP1 VALUE-decimal1
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT decimal2, 09
  LOGFORMAT-CONSTANT decimal2, 09
INSTRUCTION-CONSTANT
   OPERAND1-decimal2
  OP1 VALUE-decimal2
   OPERAND2-09
  OP2 VALUE-09
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT decimal3, 0A
  LOGFORMAT-CONSTANT decimal3, 0A
INSTRUCTION-CONSTANT
   OPERAND1-decimal3
  OP1 VALUE-decimal3
   OPERAND2-0A
  OP2 VALUE-0A
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT decimal4, 0B
  LOGFORMAT-CONSTANT decimal4, 0B
INSTRUCTION-CONSTANT
   OPERAND1-decimal4
  OP1 VALUE-decimal4
   OPERAND2-0B
  OP2 VALUE-0B
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Values to be written to the D/A converter
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT chan_A_lsb, 0C
  LOGFORMAT-CONSTANT chan_A_lsb, 0C
INSTRUCTION-CONSTANT
   OPERAND1-chan_A_lsb
  OP1 VALUE-chan_A_lsb
   OPERAND2-0C
  OP2 VALUE-0C
    COMMENT-;Channel C value LS-Byte
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT chan_A_msb, 0E
  LOGFORMAT-CONSTANT chan_A_msb, 0E
INSTRUCTION-CONSTANT
   OPERAND1-chan_A_msb
  OP1 VALUE-chan_A_msb
   OPERAND2-0E
  OP2 VALUE-0E
    COMMENT-;                MS-Byte
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Useful data constants
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT VREF_lsb, 72
  LOGFORMAT-CONSTANT VREF_lsb, 72
INSTRUCTION-CONSTANT
   OPERAND1-VREF_lsb
  OP1 VALUE-VREF_lsb
   OPERAND2-72
  OP2 VALUE-72
    COMMENT-;Reference voltage in milli-volts
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT VREF_msb, 06
  LOGFORMAT-CONSTANT VREF_msb, 06
INSTRUCTION-CONSTANT
   OPERAND1-VREF_msb
  OP1 VALUE-VREF_msb
   OPERAND2-06
  OP2 VALUE-06
    COMMENT-;Nominal value 1.65v so value is 1650 (0672 hex)
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Constant to define a software delay of 1us. This must be adjusted to reflect the
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;clock applied to KCPSM3. Every instruction executes in 2 clock cycles making the
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;calculation highly predictable. The '6' in the following equation even allows for
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;'CALL delay_1us' instruction in the initiating code.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; delay_1us_constant =  (clock_rate - 6)/4       Where 'clock_rate' is in MHz
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Example: For a 50MHz clock the constant value is (10-6)/4 = 11  (0B Hex).
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;For clock rates below 10MHz the value of 1 must be used and the operation will
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;become lower than intended.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT delay_1us_constant, 0B
  LOGFORMAT-CONSTANT delay_1us_constant, 0B
INSTRUCTION-CONSTANT
   OPERAND1-delay_1us_constant
  OP1 VALUE-delay_1us_constant
   OPERAND2-0B
  OP2 VALUE-0B
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;ASCII table
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_a, 61
  LOGFORMAT-CONSTANT character_a, 61
INSTRUCTION-CONSTANT
   OPERAND1-character_a
  OP1 VALUE-character_a
   OPERAND2-61
  OP2 VALUE-61
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_b, 62
  LOGFORMAT-CONSTANT character_b, 62
INSTRUCTION-CONSTANT
   OPERAND1-character_b
  OP1 VALUE-character_b
   OPERAND2-62
  OP2 VALUE-62
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_c, 63
  LOGFORMAT-CONSTANT character_c, 63
INSTRUCTION-CONSTANT
   OPERAND1-character_c
  OP1 VALUE-character_c
   OPERAND2-63
  OP2 VALUE-63
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_d, 64
  LOGFORMAT-CONSTANT character_d, 64
INSTRUCTION-CONSTANT
   OPERAND1-character_d
  OP1 VALUE-character_d
   OPERAND2-64
  OP2 VALUE-64
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_e, 65
  LOGFORMAT-CONSTANT character_e, 65
INSTRUCTION-CONSTANT
   OPERAND1-character_e
  OP1 VALUE-character_e
   OPERAND2-65
  OP2 VALUE-65
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_f, 66
  LOGFORMAT-CONSTANT character_f, 66
INSTRUCTION-CONSTANT
   OPERAND1-character_f
  OP1 VALUE-character_f
   OPERAND2-66
  OP2 VALUE-66
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_g, 67
  LOGFORMAT-CONSTANT character_g, 67
INSTRUCTION-CONSTANT
   OPERAND1-character_g
  OP1 VALUE-character_g
   OPERAND2-67
  OP2 VALUE-67
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_h, 68
  LOGFORMAT-CONSTANT character_h, 68
INSTRUCTION-CONSTANT
   OPERAND1-character_h
  OP1 VALUE-character_h
   OPERAND2-68
  OP2 VALUE-68
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_i, 69
  LOGFORMAT-CONSTANT character_i, 69
INSTRUCTION-CONSTANT
   OPERAND1-character_i
  OP1 VALUE-character_i
   OPERAND2-69
  OP2 VALUE-69
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_j, 6A
  LOGFORMAT-CONSTANT character_j, 6A
INSTRUCTION-CONSTANT
   OPERAND1-character_j
  OP1 VALUE-character_j
   OPERAND2-6A
  OP2 VALUE-6A
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_k, 6B
  LOGFORMAT-CONSTANT character_k, 6B
INSTRUCTION-CONSTANT
   OPERAND1-character_k
  OP1 VALUE-character_k
   OPERAND2-6B
  OP2 VALUE-6B
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_l, 6C
  LOGFORMAT-CONSTANT character_l, 6C
INSTRUCTION-CONSTANT
   OPERAND1-character_l
  OP1 VALUE-character_l
   OPERAND2-6C
  OP2 VALUE-6C
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_m, 6D
  LOGFORMAT-CONSTANT character_m, 6D
INSTRUCTION-CONSTANT
   OPERAND1-character_m
  OP1 VALUE-character_m
   OPERAND2-6D
  OP2 VALUE-6D
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_n, 6E
  LOGFORMAT-CONSTANT character_n, 6E
INSTRUCTION-CONSTANT
   OPERAND1-character_n
  OP1 VALUE-character_n
   OPERAND2-6E
  OP2 VALUE-6E
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_o, 6F
  LOGFORMAT-CONSTANT character_o, 6F
INSTRUCTION-CONSTANT
   OPERAND1-character_o
  OP1 VALUE-character_o
   OPERAND2-6F
  OP2 VALUE-6F
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_p, 70
  LOGFORMAT-CONSTANT character_p, 70
INSTRUCTION-CONSTANT
   OPERAND1-character_p
  OP1 VALUE-character_p
   OPERAND2-70
  OP2 VALUE-70
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_q, 71
  LOGFORMAT-CONSTANT character_q, 71
INSTRUCTION-CONSTANT
   OPERAND1-character_q
  OP1 VALUE-character_q
   OPERAND2-71
  OP2 VALUE-71
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_r, 72
  LOGFORMAT-CONSTANT character_r, 72
INSTRUCTION-CONSTANT
   OPERAND1-character_r
  OP1 VALUE-character_r
   OPERAND2-72
  OP2 VALUE-72
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_s, 73
  LOGFORMAT-CONSTANT character_s, 73
INSTRUCTION-CONSTANT
   OPERAND1-character_s
  OP1 VALUE-character_s
   OPERAND2-73
  OP2 VALUE-73
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_t, 74
  LOGFORMAT-CONSTANT character_t, 74
INSTRUCTION-CONSTANT
   OPERAND1-character_t
  OP1 VALUE-character_t
   OPERAND2-74
  OP2 VALUE-74
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_u, 75
  LOGFORMAT-CONSTANT character_u, 75
INSTRUCTION-CONSTANT
   OPERAND1-character_u
  OP1 VALUE-character_u
   OPERAND2-75
  OP2 VALUE-75
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_v, 76
  LOGFORMAT-CONSTANT character_v, 76
INSTRUCTION-CONSTANT
   OPERAND1-character_v
  OP1 VALUE-character_v
   OPERAND2-76
  OP2 VALUE-76
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_w, 77
  LOGFORMAT-CONSTANT character_w, 77
INSTRUCTION-CONSTANT
   OPERAND1-character_w
  OP1 VALUE-character_w
   OPERAND2-77
  OP2 VALUE-77
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_x, 78
  LOGFORMAT-CONSTANT character_x, 78
INSTRUCTION-CONSTANT
   OPERAND1-character_x
  OP1 VALUE-character_x
   OPERAND2-78
  OP2 VALUE-78
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_y, 79
  LOGFORMAT-CONSTANT character_y, 79
INSTRUCTION-CONSTANT
   OPERAND1-character_y
  OP1 VALUE-character_y
   OPERAND2-79
  OP2 VALUE-79
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_z, 7A
  LOGFORMAT-CONSTANT character_z, 7A
INSTRUCTION-CONSTANT
   OPERAND1-character_z
  OP1 VALUE-character_z
   OPERAND2-7A
  OP2 VALUE-7A
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_A, 41
  LOGFORMAT-CONSTANT character_A, 41
INSTRUCTION-CONSTANT
   OPERAND1-character_A
  OP1 VALUE-character_A
   OPERAND2-41
  OP2 VALUE-41
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_B, 42
  LOGFORMAT-CONSTANT character_B, 42
INSTRUCTION-CONSTANT
   OPERAND1-character_B
  OP1 VALUE-character_B
   OPERAND2-42
  OP2 VALUE-42
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_C, 43
  LOGFORMAT-CONSTANT character_C, 43
INSTRUCTION-CONSTANT
   OPERAND1-character_C
  OP1 VALUE-character_C
   OPERAND2-43
  OP2 VALUE-43
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_D, 44
  LOGFORMAT-CONSTANT character_D, 44
INSTRUCTION-CONSTANT
   OPERAND1-character_D
  OP1 VALUE-character_D
   OPERAND2-44
  OP2 VALUE-44
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_E, 45
  LOGFORMAT-CONSTANT character_E, 45
INSTRUCTION-CONSTANT
   OPERAND1-character_E
  OP1 VALUE-character_E
   OPERAND2-45
  OP2 VALUE-45
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_F, 46
  LOGFORMAT-CONSTANT character_F, 46
INSTRUCTION-CONSTANT
   OPERAND1-character_F
  OP1 VALUE-character_F
   OPERAND2-46
  OP2 VALUE-46
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_G, 47
  LOGFORMAT-CONSTANT character_G, 47
INSTRUCTION-CONSTANT
   OPERAND1-character_G
  OP1 VALUE-character_G
   OPERAND2-47
  OP2 VALUE-47
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_H, 48
  LOGFORMAT-CONSTANT character_H, 48
INSTRUCTION-CONSTANT
   OPERAND1-character_H
  OP1 VALUE-character_H
   OPERAND2-48
  OP2 VALUE-48
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_I, 49
  LOGFORMAT-CONSTANT character_I, 49
INSTRUCTION-CONSTANT
   OPERAND1-character_I
  OP1 VALUE-character_I
   OPERAND2-49
  OP2 VALUE-49
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_J, 4A
  LOGFORMAT-CONSTANT character_J, 4A
INSTRUCTION-CONSTANT
   OPERAND1-character_J
  OP1 VALUE-character_J
   OPERAND2-4A
  OP2 VALUE-4A
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_K, 4B
  LOGFORMAT-CONSTANT character_K, 4B
INSTRUCTION-CONSTANT
   OPERAND1-character_K
  OP1 VALUE-character_K
   OPERAND2-4B
  OP2 VALUE-4B
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_L, 4C
  LOGFORMAT-CONSTANT character_L, 4C
INSTRUCTION-CONSTANT
   OPERAND1-character_L
  OP1 VALUE-character_L
   OPERAND2-4C
  OP2 VALUE-4C
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_M, 4D
  LOGFORMAT-CONSTANT character_M, 4D
INSTRUCTION-CONSTANT
   OPERAND1-character_M
  OP1 VALUE-character_M
   OPERAND2-4D
  OP2 VALUE-4D
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_N, 4E
  LOGFORMAT-CONSTANT character_N, 4E
INSTRUCTION-CONSTANT
   OPERAND1-character_N
  OP1 VALUE-character_N
   OPERAND2-4E
  OP2 VALUE-4E
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_O, 4F
  LOGFORMAT-CONSTANT character_O, 4F
INSTRUCTION-CONSTANT
   OPERAND1-character_O
  OP1 VALUE-character_O
   OPERAND2-4F
  OP2 VALUE-4F
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_P, 50
  LOGFORMAT-CONSTANT character_P, 50
INSTRUCTION-CONSTANT
   OPERAND1-character_P
  OP1 VALUE-character_P
   OPERAND2-50
  OP2 VALUE-50
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_Q, 51
  LOGFORMAT-CONSTANT character_Q, 51
INSTRUCTION-CONSTANT
   OPERAND1-character_Q
  OP1 VALUE-character_Q
   OPERAND2-51
  OP2 VALUE-51
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_R, 52
  LOGFORMAT-CONSTANT character_R, 52
INSTRUCTION-CONSTANT
   OPERAND1-character_R
  OP1 VALUE-character_R
   OPERAND2-52
  OP2 VALUE-52
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_S, 53
  LOGFORMAT-CONSTANT character_S, 53
INSTRUCTION-CONSTANT
   OPERAND1-character_S
  OP1 VALUE-character_S
   OPERAND2-53
  OP2 VALUE-53
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_T, 54
  LOGFORMAT-CONSTANT character_T, 54
INSTRUCTION-CONSTANT
   OPERAND1-character_T
  OP1 VALUE-character_T
   OPERAND2-54
  OP2 VALUE-54
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_U, 55
  LOGFORMAT-CONSTANT character_U, 55
INSTRUCTION-CONSTANT
   OPERAND1-character_U
  OP1 VALUE-character_U
   OPERAND2-55
  OP2 VALUE-55
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_V, 56
  LOGFORMAT-CONSTANT character_V, 56
INSTRUCTION-CONSTANT
   OPERAND1-character_V
  OP1 VALUE-character_V
   OPERAND2-56
  OP2 VALUE-56
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_W, 57
  LOGFORMAT-CONSTANT character_W, 57
INSTRUCTION-CONSTANT
   OPERAND1-character_W
  OP1 VALUE-character_W
   OPERAND2-57
  OP2 VALUE-57
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_X, 58
  LOGFORMAT-CONSTANT character_X, 58
INSTRUCTION-CONSTANT
   OPERAND1-character_X
  OP1 VALUE-character_X
   OPERAND2-58
  OP2 VALUE-58
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_Y, 59
  LOGFORMAT-CONSTANT character_Y, 59
INSTRUCTION-CONSTANT
   OPERAND1-character_Y
  OP1 VALUE-character_Y
   OPERAND2-59
  OP2 VALUE-59
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_Z, 5A
  LOGFORMAT-CONSTANT character_Z, 5A
INSTRUCTION-CONSTANT
   OPERAND1-character_Z
  OP1 VALUE-character_Z
   OPERAND2-5A
  OP2 VALUE-5A
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_0, 30
  LOGFORMAT-CONSTANT character_0, 30
INSTRUCTION-CONSTANT
   OPERAND1-character_0
  OP1 VALUE-character_0
   OPERAND2-30
  OP2 VALUE-30
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_1, 31
  LOGFORMAT-CONSTANT character_1, 31
INSTRUCTION-CONSTANT
   OPERAND1-character_1
  OP1 VALUE-character_1
   OPERAND2-31
  OP2 VALUE-31
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_2, 32
  LOGFORMAT-CONSTANT character_2, 32
INSTRUCTION-CONSTANT
   OPERAND1-character_2
  OP1 VALUE-character_2
   OPERAND2-32
  OP2 VALUE-32
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_3, 33
  LOGFORMAT-CONSTANT character_3, 33
INSTRUCTION-CONSTANT
   OPERAND1-character_3
  OP1 VALUE-character_3
   OPERAND2-33
  OP2 VALUE-33
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_4, 34
  LOGFORMAT-CONSTANT character_4, 34
INSTRUCTION-CONSTANT
   OPERAND1-character_4
  OP1 VALUE-character_4
   OPERAND2-34
  OP2 VALUE-34
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_5, 35
  LOGFORMAT-CONSTANT character_5, 35
INSTRUCTION-CONSTANT
   OPERAND1-character_5
  OP1 VALUE-character_5
   OPERAND2-35
  OP2 VALUE-35
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_6, 36
  LOGFORMAT-CONSTANT character_6, 36
INSTRUCTION-CONSTANT
   OPERAND1-character_6
  OP1 VALUE-character_6
   OPERAND2-36
  OP2 VALUE-36
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_7, 37
  LOGFORMAT-CONSTANT character_7, 37
INSTRUCTION-CONSTANT
   OPERAND1-character_7
  OP1 VALUE-character_7
   OPERAND2-37
  OP2 VALUE-37
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_8, 38
  LOGFORMAT-CONSTANT character_8, 38
INSTRUCTION-CONSTANT
   OPERAND1-character_8
  OP1 VALUE-character_8
   OPERAND2-38
  OP2 VALUE-38
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_9, 39
  LOGFORMAT-CONSTANT character_9, 39
INSTRUCTION-CONSTANT
   OPERAND1-character_9
  OP1 VALUE-character_9
   OPERAND2-39
  OP2 VALUE-39
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_colon, 3A
  LOGFORMAT-CONSTANT character_colon, 3A
INSTRUCTION-CONSTANT
   OPERAND1-character_colon
  OP1 VALUE-character_colon
   OPERAND2-3A
  OP2 VALUE-3A
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_stop, 2E
  LOGFORMAT-CONSTANT character_stop, 2E
INSTRUCTION-CONSTANT
   OPERAND1-character_stop
  OP1 VALUE-character_stop
   OPERAND2-2E
  OP2 VALUE-2E
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_semi_colon, 3B
  LOGFORMAT-CONSTANT character_semi_colon, 3B
INSTRUCTION-CONSTANT
   OPERAND1-character_semi_colon
  OP1 VALUE-character_semi_colon
   OPERAND2-3B
  OP2 VALUE-3B
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_minus, 2D
  LOGFORMAT-CONSTANT character_minus, 2D
INSTRUCTION-CONSTANT
   OPERAND1-character_minus
  OP1 VALUE-character_minus
   OPERAND2-2D
  OP2 VALUE-2D
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_divide, 2F
  LOGFORMAT-CONSTANT character_divide, 2F
INSTRUCTION-CONSTANT
   OPERAND1-character_divide
  OP1 VALUE-character_divide
   OPERAND2-2F
  OP2 VALUE-2F
    COMMENT-;'/'
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_plus, 2B
  LOGFORMAT-CONSTANT character_plus, 2B
INSTRUCTION-CONSTANT
   OPERAND1-character_plus
  OP1 VALUE-character_plus
   OPERAND2-2B
  OP2 VALUE-2B
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_comma, 2C
  LOGFORMAT-CONSTANT character_comma, 2C
INSTRUCTION-CONSTANT
   OPERAND1-character_comma
  OP1 VALUE-character_comma
   OPERAND2-2C
  OP2 VALUE-2C
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_less_than, 3C
  LOGFORMAT-CONSTANT character_less_than, 3C
INSTRUCTION-CONSTANT
   OPERAND1-character_less_than
  OP1 VALUE-character_less_than
   OPERAND2-3C
  OP2 VALUE-3C
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_greater_than, 3E
  LOGFORMAT-CONSTANT character_greater_than, 3E
INSTRUCTION-CONSTANT
   OPERAND1-character_greater_than
  OP1 VALUE-character_greater_than
   OPERAND2-3E
  OP2 VALUE-3E
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_equals, 3D
  LOGFORMAT-CONSTANT character_equals, 3D
INSTRUCTION-CONSTANT
   OPERAND1-character_equals
  OP1 VALUE-character_equals
   OPERAND2-3D
  OP2 VALUE-3D
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_space, 20
  LOGFORMAT-CONSTANT character_space, 20
INSTRUCTION-CONSTANT
   OPERAND1-character_space
  OP1 VALUE-character_space
   OPERAND2-20
  OP2 VALUE-20
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_CR, 0D
  LOGFORMAT-CONSTANT character_CR, 0D
INSTRUCTION-CONSTANT
   OPERAND1-character_CR
  OP1 VALUE-character_CR
   OPERAND2-0D
  OP2 VALUE-0D
    COMMENT-;carriage return
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_question, 3F
  LOGFORMAT-CONSTANT character_question, 3F
INSTRUCTION-CONSTANT
   OPERAND1-character_question
  OP1 VALUE-character_question
   OPERAND2-3F
  OP2 VALUE-3F
    COMMENT-;'?'
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_dollar, 24
  LOGFORMAT-CONSTANT character_dollar, 24
INSTRUCTION-CONSTANT
   OPERAND1-character_dollar
  OP1 VALUE-character_dollar
   OPERAND2-24
  OP2 VALUE-24
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_exclaim, 21
  LOGFORMAT-CONSTANT character_exclaim, 21
INSTRUCTION-CONSTANT
   OPERAND1-character_exclaim
  OP1 VALUE-character_exclaim
   OPERAND2-21
  OP2 VALUE-21
    COMMENT-;'!'
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT character_BS, 08
  LOGFORMAT-CONSTANT character_BS, 08
INSTRUCTION-CONSTANT
   OPERAND1-character_BS
  OP1 VALUE-character_BS
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;Back Space command character
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Initialise the system
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-000
      LABEL-cold_start
  FORMATTED-CALL SPI_init
  LOGFORMAT-CALL SPI_init[10E]
INSTRUCTION-CALL
   OPERAND1-SPI_init
  OP1 VALUE-10E
   OPERAND2-
  OP2 VALUE-
    COMMENT-;initialise SPI bus ports
    ADDRESS-001
      LABEL-
  FORMATTED-CALL LCD_reset
  LOGFORMAT-CALL LCD_reset[218]
INSTRUCTION-CALL
   OPERAND1-LCD_reset
  OP1 VALUE-218
   OPERAND2-
  OP2 VALUE-
    COMMENT-;initialise LCD display
    ADDRESS-002
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-002
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Write welcome message to LCD display
    ADDRESS-002
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-002
      LABEL-
  FORMATTED-LOAD s5, 23
  LOGFORMAT-LOAD s5, 23
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-23
  OP2 VALUE-23
    COMMENT-;Line 2 position 3
    ADDRESS-003
      LABEL-
  FORMATTED-CALL LCD_cursor
  LOGFORMAT-CALL LCD_cursor[22E]
INSTRUCTION-CALL
   OPERAND1-LCD_cursor
  OP1 VALUE-22E
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-004
      LABEL-
  FORMATTED-CALL disp_ADC_Control
  LOGFORMAT-CALL disp_ADC_Control[17E]
INSTRUCTION-CALL
   OPERAND1-disp_ADC_Control
  OP1 VALUE-17E
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-005
      LABEL-
  FORMATTED-CALL delay_1s
  LOGFORMAT-CALL delay_1s[1D0]
INSTRUCTION-CALL
   OPERAND1-delay_1s
  OP1 VALUE-1D0
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait 5 seconds
    ADDRESS-006
      LABEL-
  FORMATTED-CALL delay_1s
  LOGFORMAT-CALL delay_1s[1D0]
INSTRUCTION-CALL
   OPERAND1-delay_1s
  OP1 VALUE-1D0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-007
      LABEL-
  FORMATTED-CALL LCD_clear
  LOGFORMAT-CALL LCD_clear[229]
INSTRUCTION-CALL
   OPERAND1-LCD_clear
  OP1 VALUE-229
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Clear display
    ADDRESS-008
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-008
      LABEL-
  FORMATTED-LOAD s0, 00
  LOGFORMAT-LOAD s0, 00
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;clear event counter
    ADDRESS-009
      LABEL-
  FORMATTED-STORE s0, sample_count
  LOGFORMAT-STORE s0, sample_count[06]
INSTRUCTION-STORE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-sample_count
  OP2 VALUE-06
    COMMENT-
    ADDRESS-00A
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;
    ADDRESS-00A
      LABEL-
  FORMATTED-STORE s0, chan_A_lsb
  LOGFORMAT-STORE s0, chan_A_lsb[0C]
INSTRUCTION-STORE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-chan_A_lsb
  OP2 VALUE-0C
    COMMENT-;clear all internal D/A values
    ADDRESS-00B
      LABEL-
  FORMATTED-STORE s0, chan_A_msb
  LOGFORMAT-STORE s0, chan_A_msb[0E]
INSTRUCTION-STORE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-chan_A_msb
  OP2 VALUE-0E
    COMMENT-;clear all internal D/A values
    ADDRESS-00C
      LABEL-
  FORMATTED-CALL dac_reset
  LOGFORMAT-CALL dac_reset[165]
INSTRUCTION-CALL
   OPERAND1-dac_reset
  OP1 VALUE-165
   OPERAND2-
  OP2 VALUE-
    COMMENT-;reset D/A converter on all channels
    ADDRESS-00D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;
    ADDRESS-00D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-00D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-00D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-00D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-00D
      LABEL-
  FORMATTED-LOAD s0, 01
  LOGFORMAT-LOAD s0, 01
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;set initial amplifier gain to 1 on both channels
    ADDRESS-00E
      LABEL-
  FORMATTED-STORE s0, amp_A_gain
  LOGFORMAT-STORE s0, amp_A_gain[04]
INSTRUCTION-STORE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-amp_A_gain
  OP2 VALUE-04
    COMMENT-
    ADDRESS-00F
      LABEL-
  FORMATTED-STORE s0, amp_B_gain
  LOGFORMAT-STORE s0, amp_B_gain[05]
INSTRUCTION-STORE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-amp_B_gain
  OP2 VALUE-05
    COMMENT-
    ADDRESS-010
      LABEL-
  FORMATTED-JUMP new_gain_set
  LOGFORMAT-JUMP new_gain_set[085]
INSTRUCTION-JUMP
   OPERAND1-new_gain_set
  OP1 VALUE-085
   OPERAND2-
  OP2 VALUE-
    COMMENT-;set, display the initial gain and enable interrupts
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The program is interrupt driven to maintain an 8KHz sample rate. The main body
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;of the program waits for an interrupt to occur. The interrupt updates all four
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;analogue outputs with values stored in scratch pad memory. This takes approximately
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;58us of the 125us available between interrupts. The main program then prepares
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;new values for the analogue outputs (in less than 67us) before waiting for the
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;next interrupt.
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-011
      LABEL-warm_start
  FORMATTED-LOAD sF, FF
  LOGFORMAT-LOAD sF, FF
INSTRUCTION-LOAD
   OPERAND1-sF
  OP1 VALUE-sF
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-;flag set and wait for interrupt to be serviced
    ADDRESS-012
      LABEL-
  FORMATTED-ENABLE INTERRUPT
  LOGFORMAT-ENABLE INTERRUPT
INSTRUCTION-ENABLE
   OPERAND1-INTERRUPT
  OP1 VALUE-INTERRUPT
   OPERAND2-
  OP2 VALUE-
    COMMENT-;normal operation
    ADDRESS-013
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait_int: INPUT sE, switch_port               ;test for button press changes to amplifier gain
    ADDRESS-013
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;TEST sE, BTN_north                  ;sE used as this in not effected by ISR
    ADDRESS-013
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP NZ, gain_increase
    ADDRESS-013
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;TEST sE, BTN_south
    ADDRESS-013
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP NZ, gain_decrease
    ADDRESS-013
      LABEL-wait_int
  FORMATTED-COMPARE sF, FF
  LOGFORMAT-COMPARE sF, FF
INSTRUCTION-COMPARE
   OPERAND1-sF
  OP1 VALUE-sF
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-;wait for interrupt
    ADDRESS-014
      LABEL-
  FORMATTED-JUMP Z, wait_int
  LOGFORMAT-JUMP Z, wait_int[013]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-wait_int
  OP2 VALUE-013
    COMMENT-;interrupt clears the flag
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Drive LEDs with simple binary count of the samples to indicate
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;that the design is active.
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;FETCH s0, sample_count              ;increment counter
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;ADD s0, 01
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;STORE s0, sample_count
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;OUTPUT s0, LED_port                 ;count increments at 1Hz
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;OUTPUT s0, LED_port                 ;count increments at 1Hz
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Display the A/D Channel 0 value as hex on LCD
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LOAD s5, 2C                         ;Line 2 position 12
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL LCD_cursor
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;FETCH s0, ADC0_msb
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL disp_hex_byte
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;FETCH s0, ADC0_lsb
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL disp_hex_byte
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Convert A/D channel 0 value to decimal voltage
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The 14-bit signed value from the A/D (sign extended to 16-bits)
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;relates to a voltage in the range -1.25v to +1.25v at the input
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;to the A/D converter relative to the 1.65v mid-rail reference point.
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The 14-bit value can be translated into the -1.25v to +1.25v using the
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;simple equation...
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   ADin = AD_value x 1.25/8192
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;It is possible to scale the AD_value by 1.25/8192 using a fixed point
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;representation.
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;However, it is also possible to scale it by another factor at the
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;same time which nicely converts to a binary value which is readily
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;converted to decimal. This can be achieved by example...
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;For an input to the A/D converter of +1.25v relative to the reference,
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the A/D will output the maximum conversion of 1FFF (+8191).
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;In this case we would like to have the result value +1.250v which can be represented
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;by the integer value +1250 with appropiate positioning of the decimal point.
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The constant to achieve this conversion is +1250/8191=+0.152606...
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Also a number requiring fixed point representation but how many bits to use?
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The way to resolve this is to realise that a multiplication will be
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;performed and it would be nice if the +1250 result ended up in a register pair.
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;So if we perform a 16x16-bit multiplication such that the upper 16-bits of
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the 32-bit result is the required value, then everything will resolve itself.
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Hence the constant required is actually (1250x(2^16))/8191=+10001 (2711 hex).
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Using the example 1FFF x 2711 = 04E1F8EF
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   of which the upper 16-bits = 04E1 (+1249 decimal)
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Likewise the other limit case is E000 x 2711 = FB1DE000
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   of which the upper 16-bits = FB1D (-1251 decimal)
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The values can be made perfect by rounding before truncation
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-FETCH s2, ADC0_lsb
  LOGFORMAT-FETCH s2, ADC0_lsb[00]
INSTRUCTION-FETCH
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-ADC0_lsb
  OP2 VALUE-00
    COMMENT-;Read A/D channel 0 value
    ADDRESS-016
      LABEL-
  FORMATTED-FETCH s3, ADC0_msb
  LOGFORMAT-FETCH s3, ADC0_msb[01]
INSTRUCTION-FETCH
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-ADC0_msb
  OP2 VALUE-01
    COMMENT-
    ADDRESS-017
      LABEL-
  FORMATTED-LOAD s0, 11
  LOGFORMAT-LOAD s0, 11
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-11
  OP2 VALUE-11
    COMMENT-;scaling value for input to A/D converter
    ADDRESS-018
      LABEL-
  FORMATTED-LOAD s1, 27
  LOGFORMAT-LOAD s1, 27
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-27
  OP2 VALUE-27
    COMMENT-
    ADDRESS-019
      LABEL-
  FORMATTED-CALL mult_16x16s
  LOGFORMAT-CALL mult_16x16s[0D3]
INSTRUCTION-CALL
   OPERAND1-mult_16x16s
  OP1 VALUE-0D3
   OPERAND2-
  OP2 VALUE-
    COMMENT-;[s7,s6,s5,s4]=[s3,s2]x[s1,s0]
    ADDRESS-01A
      LABEL-
  FORMATTED-SL0 s5
  LOGFORMAT-SL0 s5
INSTRUCTION-SL0
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-
  OP2 VALUE-
    COMMENT-;round value before truncation
    ADDRESS-01B
      LABEL-
  FORMATTED-ADDCY s6, 00
  LOGFORMAT-ADDCY s6, 00
INSTRUCTION-ADDCY
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-01C
      LABEL-
  FORMATTED-ADDCY s7, 00
  LOGFORMAT-ADDCY s7, 00
INSTRUCTION-ADDCY
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The register pair [s7,s6] now holds the binary value
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;representing the input level to the A/D converter in milli-volts.
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;This is now displayed on the LCD. Negative values need to be converted to
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;signed magnitude for display.
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LOAD s5, 20                         ;Line 2 position 0
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL LCD_cursor
    ADDRESS-01D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL disp_AD                        ;display A/D=
    ADDRESS-01D
      LABEL-
  FORMATTED-TEST s7, 80
  LOGFORMAT-TEST s7, 80
INSTRUCTION-TEST
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;test sign bit of value
    ADDRESS-01E
      LABEL-
  FORMATTED-JUMP NZ, neg_AD
  LOGFORMAT-JUMP NZ, neg_AD[01F]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-neg_AD
  OP2 VALUE-01F
    COMMENT-
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LOAD s5, character_plus
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP AD_sign
    ADDRESS-01F
      LABEL-neg_AD
  FORMATTED-XOR s6, FF
  LOGFORMAT-XOR s6, FF
INSTRUCTION-XOR
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-;complement [s7,s6] to make positive
    ADDRESS-020
      LABEL-
  FORMATTED-XOR s7, FF
  LOGFORMAT-XOR s7, FF
INSTRUCTION-XOR
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-
    ADDRESS-021
      LABEL-
  FORMATTED-ADD s6, 01
  LOGFORMAT-ADD s6, 01
INSTRUCTION-ADD
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-022
      LABEL-
  FORMATTED-ADDCY s7, 00
  LOGFORMAT-ADDCY s7, 00
INSTRUCTION-ADDCY
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LOAD s5, character_minus
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;AD_sign: CALL LCD_write_data                 ;display sign of value
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL disp_volts                     ;display 4 digit value as X.XXXv
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Convert A/D channel 0 value to display the VINA decimal voltage
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The same fundamental technique can be used to convert the 14-bit
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;A/D value into the level at the VINA input except that two more factors
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;must be considered.
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The first is that the amplifier inverts and has gain. Therefore the
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;VINA input level is opposite polarity and could be a smaller deviation
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;from the mid rail 1.65v reference.
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Secondly, to display the actual voltage level at the VINA terminal
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the 1.65v offset must be added.
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The voltage at the VINA input is therefore...
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   VINA = [AD_value x (1.25/(8192 x G))]+1.65
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Following the same methodology as for the A/D value, it means that there
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;is a set of scaling factors to deal with the negative gain values.
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; K = (+1250 x (2^16)) / (8191 x G)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;        G             K     (K Hex)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;       -1          -10001   (D8EF)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;       -2           -5001   (EC77)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;       -5           -2000   (F830)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      -10           -1000   (FC18)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      -20            -500   (FE0C)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      -50            -200   (FF38)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;     -100            -100   (FF9C)
    ADDRESS-023
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-023
      LABEL-
  FORMATTED-FETCH s2, ADC0_lsb
  LOGFORMAT-FETCH s2, ADC0_lsb[00]
INSTRUCTION-FETCH
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-ADC0_lsb
  OP2 VALUE-00
    COMMENT-;Read A/D channel 0 value
    ADDRESS-024
      LABEL-
  FORMATTED-FETCH s3, ADC0_msb
  LOGFORMAT-FETCH s3, ADC0_msb[01]
INSTRUCTION-FETCH
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-ADC0_msb
  OP2 VALUE-01
    COMMENT-
    ADDRESS-025
      LABEL-
  FORMATTED-FETCH s4, amp_A_gain
  LOGFORMAT-FETCH s4, amp_A_gain[04]
INSTRUCTION-FETCH
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-amp_A_gain
  OP2 VALUE-04
    COMMENT-;read A gain and select appropiate gain setting
    ADDRESS-026
      LABEL-
  FORMATTED-LOAD s0, EF
  LOGFORMAT-LOAD s0, EF
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-EF
  OP2 VALUE-EF
    COMMENT-;scaling value for amplifier gain of -1
    ADDRESS-027
      LABEL-
  FORMATTED-LOAD s1, D8
  LOGFORMAT-LOAD s1, D8
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-D8
  OP2 VALUE-D8
    COMMENT-
    ADDRESS-028
      LABEL-
  FORMATTED-COMPARE s4, 01
  LOGFORMAT-COMPARE s4, 01
INSTRUCTION-COMPARE
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-029
      LABEL-
  FORMATTED-JUMP Z, mult_VINA
  LOGFORMAT-JUMP Z, mult_VINA[040]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-mult_VINA
  OP2 VALUE-040
    COMMENT-
    ADDRESS-02A
      LABEL-
  FORMATTED-LOAD s0, 77
  LOGFORMAT-LOAD s0, 77
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-77
  OP2 VALUE-77
    COMMENT-;scaling value for amplifier gain of -2
    ADDRESS-02B
      LABEL-
  FORMATTED-LOAD s1, EC
  LOGFORMAT-LOAD s1, EC
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-EC
  OP2 VALUE-EC
    COMMENT-
    ADDRESS-02C
      LABEL-
  FORMATTED-COMPARE s4, 02
  LOGFORMAT-COMPARE s4, 02
INSTRUCTION-COMPARE
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-
    ADDRESS-02D
      LABEL-
  FORMATTED-JUMP Z, mult_VINA
  LOGFORMAT-JUMP Z, mult_VINA[040]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-mult_VINA
  OP2 VALUE-040
    COMMENT-
    ADDRESS-02E
      LABEL-
  FORMATTED-LOAD s0, 30
  LOGFORMAT-LOAD s0, 30
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-30
  OP2 VALUE-30
    COMMENT-;scaling value for amplifier gain of -5
    ADDRESS-02F
      LABEL-
  FORMATTED-LOAD s1, F8
  LOGFORMAT-LOAD s1, F8
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-F8
  OP2 VALUE-F8
    COMMENT-
    ADDRESS-030
      LABEL-
  FORMATTED-COMPARE s4, 03
  LOGFORMAT-COMPARE s4, 03
INSTRUCTION-COMPARE
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-03
  OP2 VALUE-03
    COMMENT-
    ADDRESS-031
      LABEL-
  FORMATTED-JUMP Z, mult_VINA
  LOGFORMAT-JUMP Z, mult_VINA[040]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-mult_VINA
  OP2 VALUE-040
    COMMENT-
    ADDRESS-032
      LABEL-
  FORMATTED-LOAD s0, 18
  LOGFORMAT-LOAD s0, 18
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-18
  OP2 VALUE-18
    COMMENT-;scaling value for amplifier gain of -10
    ADDRESS-033
      LABEL-
  FORMATTED-LOAD s1, FC
  LOGFORMAT-LOAD s1, FC
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-FC
  OP2 VALUE-FC
    COMMENT-
    ADDRESS-034
      LABEL-
  FORMATTED-COMPARE s4, 05
  LOGFORMAT-COMPARE s4, 05
INSTRUCTION-COMPARE
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-05
  OP2 VALUE-05
    COMMENT-
    ADDRESS-035
      LABEL-
  FORMATTED-JUMP Z, mult_VINA
  LOGFORMAT-JUMP Z, mult_VINA[040]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-mult_VINA
  OP2 VALUE-040
    COMMENT-
    ADDRESS-036
      LABEL-
  FORMATTED-LOAD s0, 0C
  LOGFORMAT-LOAD s0, 0C
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-0C
  OP2 VALUE-0C
    COMMENT-;scaling value for amplifier gain of -20
    ADDRESS-037
      LABEL-
  FORMATTED-LOAD s1, FE
  LOGFORMAT-LOAD s1, FE
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-FE
  OP2 VALUE-FE
    COMMENT-
    ADDRESS-038
      LABEL-
  FORMATTED-COMPARE s4, 06
  LOGFORMAT-COMPARE s4, 06
INSTRUCTION-COMPARE
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-06
  OP2 VALUE-06
    COMMENT-
    ADDRESS-039
      LABEL-
  FORMATTED-JUMP Z, mult_VINA
  LOGFORMAT-JUMP Z, mult_VINA[040]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-mult_VINA
  OP2 VALUE-040
    COMMENT-
    ADDRESS-03A
      LABEL-
  FORMATTED-LOAD s0, 38
  LOGFORMAT-LOAD s0, 38
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-38
  OP2 VALUE-38
    COMMENT-;scaling value for amplifier gain of -50
    ADDRESS-03B
      LABEL-
  FORMATTED-LOAD s1, FF
  LOGFORMAT-LOAD s1, FF
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-
    ADDRESS-03C
      LABEL-
  FORMATTED-COMPARE s4, 01
  LOGFORMAT-COMPARE s4, 01
INSTRUCTION-COMPARE
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-03D
      LABEL-
  FORMATTED-JUMP Z, mult_VINA
  LOGFORMAT-JUMP Z, mult_VINA[040]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-mult_VINA
  OP2 VALUE-040
    COMMENT-
    ADDRESS-03E
      LABEL-
  FORMATTED-LOAD s0, 9C
  LOGFORMAT-LOAD s0, 9C
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-9C
  OP2 VALUE-9C
    COMMENT-;scaling value for amplifier gain of -100
    ADDRESS-03F
      LABEL-
  FORMATTED-LOAD s1, FF
  LOGFORMAT-LOAD s1, FF
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-
    ADDRESS-040
      LABEL-mult_VINA
  FORMATTED-CALL mult_16x16s
  LOGFORMAT-CALL mult_16x16s[0D3]
INSTRUCTION-CALL
   OPERAND1-mult_16x16s
  OP1 VALUE-0D3
   OPERAND2-
  OP2 VALUE-
    COMMENT-;[s7,s6,s5,s4]=[s3,s2]x[s1,s0]
    ADDRESS-041
      LABEL-
  FORMATTED-SL0 s5
  LOGFORMAT-SL0 s5
INSTRUCTION-SL0
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-
  OP2 VALUE-
    COMMENT-;round value before truncation
    ADDRESS-042
      LABEL-
  FORMATTED-ADDCY s6, 00
  LOGFORMAT-ADDCY s6, 00
INSTRUCTION-ADDCY
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-043
      LABEL-
  FORMATTED-ADDCY s7, 00
  LOGFORMAT-ADDCY s7, 00
INSTRUCTION-ADDCY
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-044
      LABEL-
  FORMATTED-ADD s6, VREF_lsb
  LOGFORMAT-ADD s6, VREF_lsb[72]
INSTRUCTION-ADD
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-VREF_lsb
  OP2 VALUE-72
    COMMENT-;add 1.65v offset represented at 1650 (0672 hex)
    ADDRESS-045
      LABEL-
  FORMATTED-ADDCY s7, VREF_msb
  LOGFORMAT-ADDCY s7, VREF_msb[06]
INSTRUCTION-ADDCY
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-VREF_msb
  OP2 VALUE-06
    COMMENT-
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The register pair [s7,s6] now holds the binary value
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;representing the VINA input level in milli-volts.
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;This must be a positive value due to the offset of 1.65v
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;being greater than the maximum relative range of -1.25v to +1.25v.
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;This binary value can now be converted to a decimal digits
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;and displayed on the LCD.
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;If the A/D value is maximum negative (E000) or maximum positive (1FFF)
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;then an indication of the actual value being applied being greater or
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;less than that computed will be made.
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LOAD s5, 17                         ;Line 1 position 7
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL LCD_cursor
    ADDRESS-046
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL disp_VA                        ;display VA=
    ADDRESS-046
      LABEL-
  FORMATTED-FETCH s2, ADC0_lsb
  LOGFORMAT-FETCH s2, ADC0_lsb[00]
INSTRUCTION-FETCH
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-ADC0_lsb
  OP2 VALUE-00
    COMMENT-;Read A/D channel 0 value
    ADDRESS-047
      LABEL-
  FORMATTED-FETCH s3, ADC0_msb
  LOGFORMAT-FETCH s3, ADC0_msb[01]
INSTRUCTION-FETCH
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-ADC0_msb
  OP2 VALUE-01
    COMMENT-
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;COMPARE s3, E0                      ;test for maximum negative
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP NZ, test_max_pos
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;COMPARE s2, 00
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP NZ, test_max_pos
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LOAD s5, character_greater_than     ;display >
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL LCD_write_data
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP disp_VINA_volts
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;test_max_pos: COMPARE s3, 1F                      ;test for maximum positive
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP NZ, disp_VINA_volts
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;COMPARE s2, FF
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP NZ, disp_VINA_volts
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LOAD s5, character_less_than        ;display <
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CALL LCD_write_data
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;disp_VINA_volts: CALL disp_volts                     ;display 4 digit value as X.XXXv
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Storing the ADC value in the DAC registers after conditioning:
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;FETCH s2, ADC0_msb
    ADDRESS-048
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;FETCH s3, ADC0_lsb
    ADDRESS-048
      LABEL-
  FORMATTED-INPUT s3, switch_port
  LOGFORMAT-INPUT s3, switch_port[00]
INSTRUCTION-INPUT
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-switch_port
  OP2 VALUE-00
    COMMENT-
    ADDRESS-049
      LABEL-
  FORMATTED-INPUT s2, switch_port
  LOGFORMAT-INPUT s2, switch_port[00]
INSTRUCTION-INPUT
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-switch_port
  OP2 VALUE-00
    COMMENT-
    ADDRESS-04A
      LABEL-
  FORMATTED-SRX s2
  LOGFORMAT-SRX s2
INSTRUCTION-SRX
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-; shift 12-bit value right 4 places
    ADDRESS-04B
      LABEL-
  FORMATTED-SRA s3
  LOGFORMAT-SRA s3
INSTRUCTION-SRA
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-04C
      LABEL-
  FORMATTED-SRX s2
  LOGFORMAT-SRX s2
INSTRUCTION-SRX
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-04D
      LABEL-
  FORMATTED-SRA s3
  LOGFORMAT-SRA s3
INSTRUCTION-SRA
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-04E
      LABEL-
  FORMATTED-TEST s2, 80
  LOGFORMAT-TEST s2, 80
INSTRUCTION-TEST
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;test sign bit of value
    ADDRESS-04F
      LABEL-
  FORMATTED-JUMP NZ, neg_value_DAC
  LOGFORMAT-JUMP NZ, neg_value_DAC[057]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-neg_value_DAC
  OP2 VALUE-057
    COMMENT-;if negative, then actually positive, so add ref.
    ADDRESS-050
      LABEL-
  FORMATTED-LOAD s0, 0A
  LOGFORMAT-LOAD s0, 0A
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-0A
  OP2 VALUE-0A
    COMMENT-
    ADDRESS-051
      LABEL-
  FORMATTED-LOAD s1, 8F
  LOGFORMAT-LOAD s1, 8F
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-8F
  OP2 VALUE-8F
    COMMENT-
    ADDRESS-052
      LABEL-
  FORMATTED-SUB s1, s3
  LOGFORMAT-SUB s1, s3
INSTRUCTION-SUB
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-s3
  OP2 VALUE-s3
    COMMENT-
    ADDRESS-053
      LABEL-
  FORMATTED-SUBCY s0, s2
  LOGFORMAT-SUBCY s0, s2
INSTRUCTION-SUBCY
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-
    ADDRESS-054
      LABEL-
  FORMATTED-STORE s0, chan_A_msb
  LOGFORMAT-STORE s0, chan_A_msb[0E]
INSTRUCTION-STORE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-chan_A_msb
  OP2 VALUE-0E
    COMMENT-;store value for D/A output
    ADDRESS-055
      LABEL-
  FORMATTED-STORE s1, chan_A_lsb
  LOGFORMAT-STORE s1, chan_A_lsb[0C]
INSTRUCTION-STORE
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-chan_A_lsb
  OP2 VALUE-0C
    COMMENT-
    ADDRESS-056
      LABEL-
  FORMATTED-JUMP dac_re_adc_value
  LOGFORMAT-JUMP dac_re_adc_value[062]
INSTRUCTION-JUMP
   OPERAND1-dac_re_adc_value
  OP1 VALUE-062
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-057
      LABEL-neg_value_DAC
  FORMATTED-XOR s3, FF
  LOGFORMAT-XOR s3, FF
INSTRUCTION-XOR
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-;complement [s7,s6] to make positive
    ADDRESS-058
      LABEL-
  FORMATTED-XOR s2, FF
  LOGFORMAT-XOR s2, FF
INSTRUCTION-XOR
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-
    ADDRESS-059
      LABEL-
  FORMATTED-ADD s3, 01
  LOGFORMAT-ADD s3, 01
INSTRUCTION-ADD
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-05A
      LABEL-
  FORMATTED-ADDCY s2, 00
  LOGFORMAT-ADDCY s2, 00
INSTRUCTION-ADDCY
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-05B
      LABEL-
  FORMATTED-AND s2, 03
  LOGFORMAT-AND s2, 03
INSTRUCTION-AND
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-03
  OP2 VALUE-03
    COMMENT-; the first 6 bits should be zero??
    ADDRESS-05C
      LABEL-
  FORMATTED-LOAD s0, 0A
  LOGFORMAT-LOAD s0, 0A
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-0A
  OP2 VALUE-0A
    COMMENT-
    ADDRESS-05D
      LABEL-
  FORMATTED-LOAD s1, 8F
  LOGFORMAT-LOAD s1, 8F
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-8F
  OP2 VALUE-8F
    COMMENT-
    ADDRESS-05E
      LABEL-
  FORMATTED-ADD s1, s3
  LOGFORMAT-ADD s1, s3
INSTRUCTION-ADD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-s3
  OP2 VALUE-s3
    COMMENT-
    ADDRESS-05F
      LABEL-
  FORMATTED-ADDCY s0, s2
  LOGFORMAT-ADDCY s0, s2
INSTRUCTION-ADDCY
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-
    ADDRESS-060
      LABEL-
  FORMATTED-STORE s0, chan_A_msb
  LOGFORMAT-STORE s0, chan_A_msb[0E]
INSTRUCTION-STORE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-chan_A_msb
  OP2 VALUE-0E
    COMMENT-;store value for D/A output
    ADDRESS-061
      LABEL-
  FORMATTED-STORE s1, chan_A_lsb
  LOGFORMAT-STORE s1, chan_A_lsb[0C]
INSTRUCTION-STORE
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-chan_A_lsb
  OP2 VALUE-0C
    COMMENT-
    ADDRESS-062
      LABEL-dac_re_adc_value
  FORMATTED-LOAD sC, 00
  LOGFORMAT-LOAD sC, 00
INSTRUCTION-LOAD
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;channel A
    ADDRESS-063
      LABEL-
  FORMATTED-FETCH sB, chan_A_msb
  LOGFORMAT-FETCH sB, chan_A_msb[0E]
INSTRUCTION-FETCH
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-chan_A_msb
  OP2 VALUE-0E
    COMMENT-;12-bit value, ;from some reg where adc val is stored
    ADDRESS-064
      LABEL-
  FORMATTED-FETCH sA, chan_A_lsb
  LOGFORMAT-FETCH sA, chan_A_lsb[0C]
INSTRUCTION-FETCH
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-chan_A_lsb
  OP2 VALUE-0C
    COMMENT-;2 bytes
    ADDRESS-065
      LABEL-
  FORMATTED-CALL set_dac
  LOGFORMAT-CALL set_dac[149]
INSTRUCTION-CALL
   OPERAND1-set_dac
  OP1 VALUE-149
   OPERAND2-
  OP2 VALUE-
    COMMENT-;writing to the channel part
    ADDRESS-066
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-066
      LABEL-
  FORMATTED-JUMP warm_start
  LOGFORMAT-JUMP warm_start[011]
INSTRUCTION-JUMP
   OPERAND1-warm_start
  OP1 VALUE-011
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Display voltage level at in the form X.XXX on the LCD at current cursor position
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Value to be displayed must be unsigned (positive) in the
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;[s7,s6] register pair. Only the lower 4 digits are displayed.
    ADDRESS-067
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-067
      LABEL-disp_volts
  FORMATTED-CALL integer16_to_BCD
  LOGFORMAT-CALL integer16_to_BCD[0F1]
INSTRUCTION-CALL
   OPERAND1-integer16_to_BCD
  OP1 VALUE-0F1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;convert [s7,s6] to BCD in scratch pad memory
    ADDRESS-068
      LABEL-
  FORMATTED-FETCH s5, decimal3
  LOGFORMAT-FETCH s5, decimal3[0A]
INSTRUCTION-FETCH
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-decimal3
  OP2 VALUE-0A
    COMMENT-
    ADDRESS-069
      LABEL-
  FORMATTED-ADD s5, 30
  LOGFORMAT-ADD s5, 30
INSTRUCTION-ADD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-30
  OP2 VALUE-30
    COMMENT-;convert to ASCII
    ADDRESS-06A
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-06B
      LABEL-
  FORMATTED-LOAD s5, character_stop
  LOGFORMAT-LOAD s5, character_stop[2E]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_stop
  OP2 VALUE-2E
    COMMENT-
    ADDRESS-06C
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-06D
      LABEL-
  FORMATTED-FETCH s5, decimal2
  LOGFORMAT-FETCH s5, decimal2[09]
INSTRUCTION-FETCH
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-decimal2
  OP2 VALUE-09
    COMMENT-
    ADDRESS-06E
      LABEL-
  FORMATTED-ADD s5, 30
  LOGFORMAT-ADD s5, 30
INSTRUCTION-ADD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-30
  OP2 VALUE-30
    COMMENT-;convert to ASCII
    ADDRESS-06F
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-070
      LABEL-
  FORMATTED-FETCH s5, decimal1
  LOGFORMAT-FETCH s5, decimal1[08]
INSTRUCTION-FETCH
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-decimal1
  OP2 VALUE-08
    COMMENT-
    ADDRESS-071
      LABEL-
  FORMATTED-ADD s5, 30
  LOGFORMAT-ADD s5, 30
INSTRUCTION-ADD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-30
  OP2 VALUE-30
    COMMENT-;convert to ASCII
    ADDRESS-072
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-073
      LABEL-
  FORMATTED-FETCH s5, decimal0
  LOGFORMAT-FETCH s5, decimal0[07]
INSTRUCTION-FETCH
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-decimal0
  OP2 VALUE-07
    COMMENT-
    ADDRESS-074
      LABEL-
  FORMATTED-ADD s5, 30
  LOGFORMAT-ADD s5, 30
INSTRUCTION-ADD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-30
  OP2 VALUE-30
    COMMENT-;convert to ASCII
    ADDRESS-075
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-076
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-;ensure next position is cleared
    ADDRESS-077
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-078
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Changing amplifier gain using press buttons
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Possible gain values are
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   Gain   Amplifier
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;            code
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;    -1        1
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;    -2        2
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;    -5        3
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   -10        4
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   -20        5
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   -50        6
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  -100        7
    ADDRESS-079
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-079
      LABEL-gain_increase
  FORMATTED-DISABLE INTERRUPT
  LOGFORMAT-DISABLE INTERRUPT
INSTRUCTION-DISABLE
   OPERAND1-INTERRUPT
  OP1 VALUE-INTERRUPT
   OPERAND2-
  OP2 VALUE-
    COMMENT-;stop normal operation
    ADDRESS-07A
      LABEL-
  FORMATTED-FETCH s0, amp_A_gain
  LOGFORMAT-FETCH s0, amp_A_gain[04]
INSTRUCTION-FETCH
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-amp_A_gain
  OP2 VALUE-04
    COMMENT-;read current gain
    ADDRESS-07B
      LABEL-
  FORMATTED-ADD s0, 01
  LOGFORMAT-ADD s0, 01
INSTRUCTION-ADD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-07C
      LABEL-
  FORMATTED-COMPARE s0, 08
  LOGFORMAT-COMPARE s0, 08
INSTRUCTION-COMPARE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;test for too big
    ADDRESS-07D
      LABEL-
  FORMATTED-JUMP NZ, new_gain_set
  LOGFORMAT-JUMP NZ, new_gain_set[085]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-new_gain_set
  OP2 VALUE-085
    COMMENT-
    ADDRESS-07E
      LABEL-
  FORMATTED-LOAD s0, 07
  LOGFORMAT-LOAD s0, 07
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-07
  OP2 VALUE-07
    COMMENT-;maximum gain
    ADDRESS-07F
      LABEL-
  FORMATTED-JUMP new_gain_set
  LOGFORMAT-JUMP new_gain_set[085]
INSTRUCTION-JUMP
   OPERAND1-new_gain_set
  OP1 VALUE-085
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-080
      LABEL-gain_decrease
  FORMATTED-DISABLE INTERRUPT
  LOGFORMAT-DISABLE INTERRUPT
INSTRUCTION-DISABLE
   OPERAND1-INTERRUPT
  OP1 VALUE-INTERRUPT
   OPERAND2-
  OP2 VALUE-
    COMMENT-;stop normal operation
    ADDRESS-081
      LABEL-
  FORMATTED-FETCH s0, amp_A_gain
  LOGFORMAT-FETCH s0, amp_A_gain[04]
INSTRUCTION-FETCH
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-amp_A_gain
  OP2 VALUE-04
    COMMENT-;read current gain
    ADDRESS-082
      LABEL-
  FORMATTED-SUB s0, 01
  LOGFORMAT-SUB s0, 01
INSTRUCTION-SUB
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-083
      LABEL-
  FORMATTED-JUMP NZ, new_gain_set
  LOGFORMAT-JUMP NZ, new_gain_set[085]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-new_gain_set
  OP2 VALUE-085
    COMMENT-
    ADDRESS-084
      LABEL-
  FORMATTED-LOAD s0, 01
  LOGFORMAT-LOAD s0, 01
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;minimum gain
    ADDRESS-085
      LABEL-new_gain_set
  FORMATTED-STORE s0, amp_A_gain
  LOGFORMAT-STORE s0, amp_A_gain[04]
INSTRUCTION-STORE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-amp_A_gain
  OP2 VALUE-04
    COMMENT-;store new value
    ADDRESS-086
      LABEL-
  FORMATTED-FETCH s2, amp_B_gain
  LOGFORMAT-FETCH s2, amp_B_gain[05]
INSTRUCTION-FETCH
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-amp_B_gain
  OP2 VALUE-05
    COMMENT-;form the amplifier control byte
    ADDRESS-087
      LABEL-
  FORMATTED-SL0 s2
  LOGFORMAT-SL0 s2
INSTRUCTION-SL0
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-;B amplifier set by upper 4 bits
    ADDRESS-088
      LABEL-
  FORMATTED-SL0 s2
  LOGFORMAT-SL0 s2
INSTRUCTION-SL0
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-089
      LABEL-
  FORMATTED-SL0 s2
  LOGFORMAT-SL0 s2
INSTRUCTION-SL0
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-08A
      LABEL-
  FORMATTED-SL0 s2
  LOGFORMAT-SL0 s2
INSTRUCTION-SL0
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-08B
      LABEL-
  FORMATTED-OR s2, s0
  LOGFORMAT-OR s2, s0
INSTRUCTION-OR
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-s0
  OP2 VALUE-s0
    COMMENT-;A amplifier set by lower
    ADDRESS-08C
      LABEL-
  FORMATTED-CALL set_amp
  LOGFORMAT-CALL set_amp[111]
INSTRUCTION-CALL
   OPERAND1-set_amp
  OP1 VALUE-111
   OPERAND2-
  OP2 VALUE-
    COMMENT-;set SPI amplifier
    ADDRESS-08D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;display gain setting on LCD
    ADDRESS-08D
      LABEL-
  FORMATTED-LOAD s5, 10
  LOGFORMAT-LOAD s5, 10
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-10
  OP2 VALUE-10
    COMMENT-;Line 1 position 0
    ADDRESS-08E
      LABEL-
  FORMATTED-CALL LCD_cursor
  LOGFORMAT-CALL LCD_cursor[22E]
INSTRUCTION-CALL
   OPERAND1-LCD_cursor
  OP1 VALUE-22E
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-08F
      LABEL-
  FORMATTED-LOAD s5, character_G
  LOGFORMAT-LOAD s5, character_G[47]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_G
  OP2 VALUE-47
    COMMENT-
    ADDRESS-090
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-091
      LABEL-
  FORMATTED-LOAD s5, character_equals
  LOGFORMAT-LOAD s5, character_equals[3D]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_equals
  OP2 VALUE-3D
    COMMENT-
    ADDRESS-092
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-093
      LABEL-
  FORMATTED-LOAD s5, character_minus
  LOGFORMAT-LOAD s5, character_minus[2D]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_minus
  OP2 VALUE-2D
    COMMENT-
    ADDRESS-094
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-095
      LABEL-
  FORMATTED-FETCH s0, amp_A_gain
  LOGFORMAT-FETCH s0, amp_A_gain[04]
INSTRUCTION-FETCH
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-amp_A_gain
  OP2 VALUE-04
    COMMENT-;read A gain setting
    ADDRESS-096
      LABEL-
  FORMATTED-COMPARE s0, 01
  LOGFORMAT-COMPARE s0, 01
INSTRUCTION-COMPARE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;determine actual gain value
    ADDRESS-097
      LABEL-
  FORMATTED-JUMP NZ, test_A2
  LOGFORMAT-JUMP NZ, test_A2[09F]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-test_A2
  OP2 VALUE-09F
    COMMENT-
    ADDRESS-098
      LABEL-
  FORMATTED-LOAD s5, character_1
  LOGFORMAT-LOAD s5, character_1[31]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_1
  OP2 VALUE-31
    COMMENT-;gain is -1
    ADDRESS-099
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-09A
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-09B
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-09C
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-09D
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-09E
      LABEL-
  FORMATTED-JUMP wait_no_press
  LOGFORMAT-JUMP wait_no_press[0D2]
INSTRUCTION-JUMP
   OPERAND1-wait_no_press
  OP1 VALUE-0D2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-09F
      LABEL-test_A2
  FORMATTED-COMPARE s0, 02
  LOGFORMAT-COMPARE s0, 02
INSTRUCTION-COMPARE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-
    ADDRESS-0A0
      LABEL-
  FORMATTED-JUMP NZ, test_A3
  LOGFORMAT-JUMP NZ, test_A3[0A8]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-test_A3
  OP2 VALUE-0A8
    COMMENT-
    ADDRESS-0A1
      LABEL-
  FORMATTED-LOAD s5, character_2
  LOGFORMAT-LOAD s5, character_2[32]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_2
  OP2 VALUE-32
    COMMENT-;gain is -2
    ADDRESS-0A2
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0A3
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-0A4
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0A5
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-0A6
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0A7
      LABEL-
  FORMATTED-JUMP wait_no_press
  LOGFORMAT-JUMP wait_no_press[0D2]
INSTRUCTION-JUMP
   OPERAND1-wait_no_press
  OP1 VALUE-0D2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0A8
      LABEL-test_A3
  FORMATTED-COMPARE s0, 03
  LOGFORMAT-COMPARE s0, 03
INSTRUCTION-COMPARE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-03
  OP2 VALUE-03
    COMMENT-
    ADDRESS-0A9
      LABEL-
  FORMATTED-JUMP NZ, test_A4
  LOGFORMAT-JUMP NZ, test_A4[0B1]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-test_A4
  OP2 VALUE-0B1
    COMMENT-
    ADDRESS-0AA
      LABEL-
  FORMATTED-LOAD s5, character_5
  LOGFORMAT-LOAD s5, character_5[35]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_5
  OP2 VALUE-35
    COMMENT-;gain is -5
    ADDRESS-0AB
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0AC
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-0AD
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0AE
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-0AF
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0B0
      LABEL-
  FORMATTED-JUMP wait_no_press
  LOGFORMAT-JUMP wait_no_press[0D2]
INSTRUCTION-JUMP
   OPERAND1-wait_no_press
  OP1 VALUE-0D2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0B1
      LABEL-test_A4
  FORMATTED-COMPARE s0, 04
  LOGFORMAT-COMPARE s0, 04
INSTRUCTION-COMPARE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-
    ADDRESS-0B2
      LABEL-
  FORMATTED-JUMP NZ, test_A5
  LOGFORMAT-JUMP NZ, test_A5[0BA]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-test_A5
  OP2 VALUE-0BA
    COMMENT-
    ADDRESS-0B3
      LABEL-
  FORMATTED-LOAD s5, character_1
  LOGFORMAT-LOAD s5, character_1[31]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_1
  OP2 VALUE-31
    COMMENT-;gain is -10
    ADDRESS-0B4
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0B5
      LABEL-
  FORMATTED-LOAD s5, character_0
  LOGFORMAT-LOAD s5, character_0[30]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_0
  OP2 VALUE-30
    COMMENT-
    ADDRESS-0B6
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0B7
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-0B8
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0B9
      LABEL-
  FORMATTED-JUMP wait_no_press
  LOGFORMAT-JUMP wait_no_press[0D2]
INSTRUCTION-JUMP
   OPERAND1-wait_no_press
  OP1 VALUE-0D2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0BA
      LABEL-test_A5
  FORMATTED-COMPARE s0, 05
  LOGFORMAT-COMPARE s0, 05
INSTRUCTION-COMPARE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-05
  OP2 VALUE-05
    COMMENT-
    ADDRESS-0BB
      LABEL-
  FORMATTED-JUMP NZ, test_A6
  LOGFORMAT-JUMP NZ, test_A6[0C3]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-test_A6
  OP2 VALUE-0C3
    COMMENT-
    ADDRESS-0BC
      LABEL-
  FORMATTED-LOAD s5, character_2
  LOGFORMAT-LOAD s5, character_2[32]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_2
  OP2 VALUE-32
    COMMENT-;gain is -20
    ADDRESS-0BD
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0BE
      LABEL-
  FORMATTED-LOAD s5, character_0
  LOGFORMAT-LOAD s5, character_0[30]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_0
  OP2 VALUE-30
    COMMENT-
    ADDRESS-0BF
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0C0
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-0C1
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0C2
      LABEL-
  FORMATTED-JUMP wait_no_press
  LOGFORMAT-JUMP wait_no_press[0D2]
INSTRUCTION-JUMP
   OPERAND1-wait_no_press
  OP1 VALUE-0D2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0C3
      LABEL-test_A6
  FORMATTED-COMPARE s0, 06
  LOGFORMAT-COMPARE s0, 06
INSTRUCTION-COMPARE
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-06
  OP2 VALUE-06
    COMMENT-
    ADDRESS-0C4
      LABEL-
  FORMATTED-JUMP NZ, gain_A7
  LOGFORMAT-JUMP NZ, gain_A7[0CC]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-gain_A7
  OP2 VALUE-0CC
    COMMENT-
    ADDRESS-0C5
      LABEL-
  FORMATTED-LOAD s5, character_5
  LOGFORMAT-LOAD s5, character_5[35]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_5
  OP2 VALUE-35
    COMMENT-;gain is -50
    ADDRESS-0C6
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0C7
      LABEL-
  FORMATTED-LOAD s5, character_0
  LOGFORMAT-LOAD s5, character_0[30]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_0
  OP2 VALUE-30
    COMMENT-
    ADDRESS-0C8
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0C9
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-0CA
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0CB
      LABEL-
  FORMATTED-JUMP wait_no_press
  LOGFORMAT-JUMP wait_no_press[0D2]
INSTRUCTION-JUMP
   OPERAND1-wait_no_press
  OP1 VALUE-0D2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0CC
      LABEL-gain_A7
  FORMATTED-LOAD s5, character_1
  LOGFORMAT-LOAD s5, character_1[31]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_1
  OP2 VALUE-31
    COMMENT-;gain is -100
    ADDRESS-0CD
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0CE
      LABEL-
  FORMATTED-LOAD s5, character_0
  LOGFORMAT-LOAD s5, character_0[30]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_0
  OP2 VALUE-30
    COMMENT-
    ADDRESS-0CF
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0D0
      LABEL-
  FORMATTED-LOAD s5, character_0
  LOGFORMAT-LOAD s5, character_0[30]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_0
  OP2 VALUE-30
    COMMENT-
    ADDRESS-0D1
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0D2
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;wait_no_press: CALL delay_20ms                     ;delay to help avoid switch bounce
    ADDRESS-0D2
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;INPUT s0, switch_port               ;check for release of press buttons
    ADDRESS-0D2
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;TEST s0, 05                         ;north and south buttons
    ADDRESS-0D2
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;JUMP NZ, wait_no_press
    ADDRESS-0D2
      LABEL-wait_no_press
  FORMATTED-JUMP warm_start
  LOGFORMAT-JUMP warm_start[011]
INSTRUCTION-JUMP
   OPERAND1-warm_start
  OP1 VALUE-011
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;16-bit by 16-bit Signed multiplier
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;16 bit signed multiplication using shift and add technique.
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The full precision 32-bit product is returned.
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The key to signed multiplication is to think of all bits of the second operand
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;[s1,s0] as being positive except for the most significant bit. This means that
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the first operand is added to the result in all cases when there is a '1' in the
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;second operand except for the MSB case when the first operand is subtracted if there
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;is a '1'.
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;[s7,s6,s5,s4]=[s3,s2]x[s1,s0]
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,sA
    ADDRESS-0D3
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0D3
      LABEL-mult_16x16s
  FORMATTED-LOAD s7, 00
  LOGFORMAT-LOAD s7, 00
INSTRUCTION-LOAD
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;clear accumulator
    ADDRESS-0D4
      LABEL-
  FORMATTED-LOAD s6, 00
  LOGFORMAT-LOAD s6, 00
INSTRUCTION-LOAD
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-0D5
      LABEL-
  FORMATTED-LOAD s5, 00
  LOGFORMAT-LOAD s5, 00
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;Set bit 14 to act as a bit shift counter
    ADDRESS-0D6
      LABEL-
  FORMATTED-LOAD s4, 00
  LOGFORMAT-LOAD s4, 00
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-0D7
      LABEL-
  FORMATTED-LOAD s8, 00
  LOGFORMAT-LOAD s8, 00
INSTRUCTION-LOAD
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;sign extend [s3,s2] to form [s9,s8,s3,s2]
    ADDRESS-0D8
      LABEL-
  FORMATTED-TEST s3, 80
  LOGFORMAT-TEST s3, 80
INSTRUCTION-TEST
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;test sign of first operand
    ADDRESS-0D9
      LABEL-
  FORMATTED-JUMP Z, m16s_pos
  LOGFORMAT-JUMP Z, m16s_pos[0DB]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-m16s_pos
  OP2 VALUE-0DB
    COMMENT-
    ADDRESS-0DA
      LABEL-
  FORMATTED-LOAD s8, FF
  LOGFORMAT-LOAD s8, FF
INSTRUCTION-LOAD
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-
    ADDRESS-0DB
      LABEL-m16s_pos
  FORMATTED-LOAD s9, s8
  LOGFORMAT-LOAD s9, s8
INSTRUCTION-LOAD
   OPERAND1-s9
  OP1 VALUE-s9
   OPERAND2-s8
  OP2 VALUE-s8
    COMMENT-;[s9,s8,s3,s2]=0000xxxx or FFFFxxxx as required
    ADDRESS-0DC
      LABEL-
  FORMATTED-LOAD sA, 0F
  LOGFORMAT-LOAD sA, 0F
INSTRUCTION-LOAD
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-0F
  OP2 VALUE-0F
    COMMENT-;15 positive shift and add operations to perform
    ADDRESS-0DD
      LABEL-m16s_loop
  FORMATTED-SR0 s1
  LOGFORMAT-SR0 s1
INSTRUCTION-SR0
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;shift right operand [s1,s0]
    ADDRESS-0DE
      LABEL-
  FORMATTED-SRA s0
  LOGFORMAT-SRA s0
INSTRUCTION-SRA
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0DF
      LABEL-
  FORMATTED-JUMP NC, m16s_noadd
  LOGFORMAT-JUMP NC, m16s_noadd[0E4]
INSTRUCTION-JUMP
   OPERAND1-NC
  OP1 VALUE-NC
   OPERAND2-m16s_noadd
  OP2 VALUE-0E4
    COMMENT-;test for a '1'
    ADDRESS-0E0
      LABEL-
  FORMATTED-ADD s4, s2
  LOGFORMAT-ADD s4, s2
INSTRUCTION-ADD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;32-bit addition [s7,s6,s5,s4]=[s7,s6,s5,s4]+[s9,s8,s3,s2]
    ADDRESS-0E1
      LABEL-
  FORMATTED-ADDCY s5, s3
  LOGFORMAT-ADDCY s5, s3
INSTRUCTION-ADDCY
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-s3
  OP2 VALUE-s3
    COMMENT-
    ADDRESS-0E2
      LABEL-
  FORMATTED-ADDCY s6, s8
  LOGFORMAT-ADDCY s6, s8
INSTRUCTION-ADDCY
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-s8
  OP2 VALUE-s8
    COMMENT-
    ADDRESS-0E3
      LABEL-
  FORMATTED-ADDCY s7, s9
  LOGFORMAT-ADDCY s7, s9
INSTRUCTION-ADDCY
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-s9
  OP2 VALUE-s9
    COMMENT-
    ADDRESS-0E4
      LABEL-m16s_noadd
  FORMATTED-SL0 s2
  LOGFORMAT-SL0 s2
INSTRUCTION-SL0
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-;multiply first operand by 2
    ADDRESS-0E5
      LABEL-
  FORMATTED-SLA s3
  LOGFORMAT-SLA s3
INSTRUCTION-SLA
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0E6
      LABEL-
  FORMATTED-SLA s8
  LOGFORMAT-SLA s8
INSTRUCTION-SLA
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0E7
      LABEL-
  FORMATTED-SLA s9
  LOGFORMAT-SLA s9
INSTRUCTION-SLA
   OPERAND1-s9
  OP1 VALUE-s9
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0E8
      LABEL-
  FORMATTED-SUB sA, 01
  LOGFORMAT-SUB sA, 01
INSTRUCTION-SUB
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-0E9
      LABEL-
  FORMATTED-JUMP NZ, m16s_loop
  LOGFORMAT-JUMP NZ, m16s_loop[0DD]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-m16s_loop
  OP2 VALUE-0DD
    COMMENT-;move to next unsigned bit
    ADDRESS-0EA
      LABEL-
  FORMATTED-TEST s0, 01
  LOGFORMAT-TEST s0, 01
INSTRUCTION-TEST
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;test sign bit of operand [s1,s0]
    ADDRESS-0EB
      LABEL-
  FORMATTED-JUMP NC, m16s_nosub
  LOGFORMAT-JUMP NC, m16s_nosub[0F0]
INSTRUCTION-JUMP
   OPERAND1-NC
  OP1 VALUE-NC
   OPERAND2-m16s_nosub
  OP2 VALUE-0F0
    COMMENT-
    ADDRESS-0EC
      LABEL-
  FORMATTED-SUB s4, s2
  LOGFORMAT-SUB s4, s2
INSTRUCTION-SUB
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;32-bit subtraction [s7,s6,s5,s4]=[s7,s6,s5,s4]-[s9,s8,s3,s2]
    ADDRESS-0ED
      LABEL-
  FORMATTED-SUBCY s5, s3
  LOGFORMAT-SUBCY s5, s3
INSTRUCTION-SUBCY
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-s3
  OP2 VALUE-s3
    COMMENT-
    ADDRESS-0EE
      LABEL-
  FORMATTED-SUBCY s6, s8
  LOGFORMAT-SUBCY s6, s8
INSTRUCTION-SUBCY
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-s8
  OP2 VALUE-s8
    COMMENT-
    ADDRESS-0EF
      LABEL-
  FORMATTED-SUBCY s7, s9
  LOGFORMAT-SUBCY s7, s9
INSTRUCTION-SUBCY
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-s9
  OP2 VALUE-s9
    COMMENT-
    ADDRESS-0F0
      LABEL-m16s_nosub
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;16-bit positive integer to 5 digit decimal conversion
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Convert the 16 bit value in register set [s7,s6]
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;into the BCD decimal equivalent located in the scratch pad memory
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;locations 'decimal0' to 'decimal4' which must be in ascending locations.
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Register set [s9,s8,s7,s6] are preserved.
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Each digit is formed in turn starting with the least significant.
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0,s1,s2,s3,s4,s5,s6,s7,s8
    ADDRESS-0F1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F1
      LABEL-integer16_to_BCD
  FORMATTED-LOAD s0, 05
  LOGFORMAT-LOAD s0, 05
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-05
  OP2 VALUE-05
    COMMENT-;5 digits to be formed from value up to 65535
    ADDRESS-0F2
      LABEL-
  FORMATTED-LOAD s8, decimal0
  LOGFORMAT-LOAD s8, decimal0[07]
INSTRUCTION-LOAD
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-decimal0
  OP2 VALUE-07
    COMMENT-;pointer for LS-Digit
    ADDRESS-0F3
      LABEL-int_to_BCD_loop
  FORMATTED-CALL divide_16bit_by_10
  LOGFORMAT-CALL divide_16bit_by_10[0F9]
INSTRUCTION-CALL
   OPERAND1-divide_16bit_by_10
  OP1 VALUE-0F9
   OPERAND2-
  OP2 VALUE-
    COMMENT-;[s7,s6]=[s7,s6]/10  with remainder in s4
    ADDRESS-0F4
      LABEL-
  FORMATTED-STORE s4, (s8)
  LOGFORMAT-STORE s4, (s8)
INSTRUCTION-STORE
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-(s8)
  OP2 VALUE-(s8)
    COMMENT-;remainder becomes digit value
    ADDRESS-0F5
      LABEL-
  FORMATTED-ADD s8, 01
  LOGFORMAT-ADD s8, 01
INSTRUCTION-ADD
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;move to next most significant digit
    ADDRESS-0F6
      LABEL-
  FORMATTED-SUB s0, 01
  LOGFORMAT-SUB s0, 01
INSTRUCTION-SUB
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;one less digit to compute
    ADDRESS-0F7
      LABEL-
  FORMATTED-JUMP NZ, int_to_BCD_loop
  LOGFORMAT-JUMP NZ, int_to_BCD_loop[0F3]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-int_to_BCD_loop
  OP2 VALUE-0F3
    COMMENT-
    ADDRESS-0F8
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Divide 16-bit binary integer by 10
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The value to be divided is held in register set [s7,s6]
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;and this is where the result is returned to.
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;At then end of the integer division the remainder in the range 0 to 9
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;will be in register s4.
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s1,s2,s3,s4,s5,s6,s7
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Other registers are used but are preserved
    ADDRESS-0F9
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-0F9
      LABEL-divide_16bit_by_10
  FORMATTED-LOAD s4, s6
  LOGFORMAT-LOAD s4, s6
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s6
  OP2 VALUE-s6
    COMMENT-;copy input value to [s5,s4]
    ADDRESS-0FA
      LABEL-
  FORMATTED-LOAD s5, s7
  LOGFORMAT-LOAD s5, s7
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-s7
  OP2 VALUE-s7
    COMMENT-
    ADDRESS-0FB
      LABEL-
  FORMATTED-LOAD s6, 00
  LOGFORMAT-LOAD s6, 00
INSTRUCTION-LOAD
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;clear result
    ADDRESS-0FC
      LABEL-
  FORMATTED-LOAD s7, 00
  LOGFORMAT-LOAD s7, 00
INSTRUCTION-LOAD
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-0FD
      LABEL-
  FORMATTED-LOAD s2, 00
  LOGFORMAT-LOAD s2, 00
INSTRUCTION-LOAD
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;initialise '10' value into msb's of set [s3,s2]
    ADDRESS-0FE
      LABEL-
  FORMATTED-LOAD s3, A0
  LOGFORMAT-LOAD s3, A0
INSTRUCTION-LOAD
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-A0
  OP2 VALUE-A0
    COMMENT-
    ADDRESS-0FF
      LABEL-
  FORMATTED-LOAD s1, 0D
  LOGFORMAT-LOAD s1, 0D
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-0D
  OP2 VALUE-0D
    COMMENT-;13 subtract and shift iterations to be performed
    ADDRESS-100
      LABEL-div10_loop
  FORMATTED-SUB s4, s2
  LOGFORMAT-SUB s4, s2
INSTRUCTION-SUB
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;perform 16-bit subtract [s5,s4]-[s3,s2]
    ADDRESS-101
      LABEL-
  FORMATTED-SUBCY s5, s3
  LOGFORMAT-SUBCY s5, s3
INSTRUCTION-SUBCY
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-s3
  OP2 VALUE-s3
    COMMENT-
    ADDRESS-102
      LABEL-
  FORMATTED-JUMP C, div10_restore
  LOGFORMAT-JUMP C, div10_restore[105]
INSTRUCTION-JUMP
   OPERAND1-C
  OP1 VALUE-C
   OPERAND2-div10_restore
  OP2 VALUE-105
    COMMENT-
    ADDRESS-103
      LABEL-
  FORMATTED-SL1 s6
  LOGFORMAT-SL1 s6
INSTRUCTION-SL1
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-
  OP2 VALUE-
    COMMENT-;shift '1' into result because subtract was possible
    ADDRESS-104
      LABEL-
  FORMATTED-JUMP div10_shifts
  LOGFORMAT-JUMP div10_shifts[108]
INSTRUCTION-JUMP
   OPERAND1-div10_shifts
  OP1 VALUE-108
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-105
      LABEL-div10_restore
  FORMATTED-ADD s4, s2
  LOGFORMAT-ADD s4, s2
INSTRUCTION-ADD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;perform 32-bit addition [s5,s4]+[s3,s2]
    ADDRESS-106
      LABEL-
  FORMATTED-ADDCY s5, s3
  LOGFORMAT-ADDCY s5, s3
INSTRUCTION-ADDCY
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-s3
  OP2 VALUE-s3
    COMMENT-;to restore value
    ADDRESS-107
      LABEL-
  FORMATTED-SL0 s6
  LOGFORMAT-SL0 s6
INSTRUCTION-SL0
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-
  OP2 VALUE-
    COMMENT-;shift '0' into result because subtract was not possible
    ADDRESS-108
      LABEL-div10_shifts
  FORMATTED-SLA s7
  LOGFORMAT-SLA s7
INSTRUCTION-SLA
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-
  OP2 VALUE-
    COMMENT-;complete 16-bit shift left
    ADDRESS-109
      LABEL-
  FORMATTED-SR0 s3
  LOGFORMAT-SR0 s3
INSTRUCTION-SR0
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-
  OP2 VALUE-
    COMMENT-;divide '10' value by 2 (shift right 1 place)
    ADDRESS-10A
      LABEL-
  FORMATTED-SRA s2
  LOGFORMAT-SRA s2
INSTRUCTION-SRA
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-10B
      LABEL-
  FORMATTED-SUB s1, 01
  LOGFORMAT-SUB s1, 01
INSTRUCTION-SUB
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;count iterations
    ADDRESS-10C
      LABEL-
  FORMATTED-JUMP NZ, div10_loop
  LOGFORMAT-JUMP NZ, div10_loop[100]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-div10_loop
  OP2 VALUE-100
    COMMENT-
    ADDRESS-10D
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;SPI communication routines for Spartan-3E Starter Kit
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;These routines will work with two output ports and one input port which should be
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;defined as follows using CONSTANT directives.
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   (replace 'pp' with appropriate port address in each case)
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;In the list of CONSTANT directives, there are ports associated with all the SPI devices
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;provided on the board. Even if some devices are not used, it is vital that the remaining
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;devices are disabled. Leaving all signals connected and use of these routines will ensure
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;that all other devices are disabled when communicating with a particular device.
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_control_port, pp       ;SPI clock and chip selects
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_sck, 01                ;                  SCK - bit0
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_rom_cs, 02             ;    serial rom select - bit1
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_spare_control, 04      ;                spare - bit2
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_amp_cs, 08             ;     amplifier select - bit3
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_adc_conv, 10           ;          A/D convert - bit4
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_dac_cs, 20             ;           D/A select - bit5
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_amp_shdn, 40           ;       amplifier SHDN - bit6
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_dac_clr, 80            ;            D/A clear - bit7
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_output_port, pp        ;SPI data output
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_sdo, 80                ;   SDO - bit7
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_input_port, pp         ;SPI data input
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_sdi, 80                ;             SDI - bit7
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;CONSTANT SPI_amp_sdi, 40            ;   amplifier SDI - bit6
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Initialise SPI bus
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;This routine should be used to initialise the SPI bus.
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The SCK clock is made low.
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Device selections are made inactive as follows
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   SPI_sck      = 0      Clock is Low (required)
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   SPI_rom_cs   = 1      Deselect ROM
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   spare        = 1      spare control bit
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   SPI_amp_cs   = 1      Deselect amplifier
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   SPI_adc_conv = 0      A/D convert ready to apply positive pulse
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   SPI_dac_cs   = 1      Deselect D/A
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   SPI_amp_shdn = 0      Amplifier active and available
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   SPI_dac_clr  = 1      D/A clear off
    ADDRESS-10E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-10E
      LABEL-SPI_init
  FORMATTED-LOAD s0, AE
  LOGFORMAT-LOAD s0, AE
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-AE
  OP2 VALUE-AE
    COMMENT-;normally AE
    ADDRESS-10F
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-
    ADDRESS-110
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;SPI communication routines for Programmable Amplifier
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Set the A and B channel gain of the Dual Amplifier (LTC6912-1).
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The gain value should be provided in the s2 register with the upper nibble
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;defining the gain for the B channel and lower nibble the gain for the A channel.
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 0000 = 0 hex = Gain  0 with input hi-Z and output driving
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 0001 = 1 hex = Gain -1
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 0010 = 2 hex = Gain -2
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 0011 = 3 hex = Gain -5
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 0100 = 4 hex = Gain -10
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 0101 = 5 hex = Gain -20
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 0110 = 6 hex = Gain -50
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 0111 = 7 hex = Gain -100
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; 1000 = 8 hex = software shutdown (power on default). Hi-Z output.
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;On return, the s2, register will contain the response from the LTC6912-1 amplifier.
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;This will be the same format and indicate the previous setting of the amplifier.
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The response is obtained from the dedicated AMP_SDI signal since the LTC6912 output
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;is always active and can not be on a shared SPI bus.
    ADDRESS-111
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-111
      LABEL-set_amp
  FORMATTED-CALL SPI_init
  LOGFORMAT-CALL SPI_init[10E]
INSTRUCTION-CALL
   OPERAND1-SPI_init
  OP1 VALUE-10E
   OPERAND2-
  OP2 VALUE-
    COMMENT-;ensure known state of bus and s0 register
    ADDRESS-112
      LABEL-
  FORMATTED-XOR s0, SPI_amp_cs
  LOGFORMAT-XOR s0, SPI_amp_cs[08]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_amp_cs
  OP2 VALUE-08
    COMMENT-;select low on Amplifier chip select
    ADDRESS-113
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-
    ADDRESS-114
      LABEL-
  FORMATTED-LOAD s1, 08
  LOGFORMAT-LOAD s1, 08
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;8-bits to transmit and receive
    ADDRESS-115
      LABEL-next_amp_SPI_bit
  FORMATTED-OUTPUT s2, SPI_output_port
  LOGFORMAT-OUTPUT s2, SPI_output_port[04]
INSTRUCTION-OUTPUT
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-SPI_output_port
  OP2 VALUE-04
    COMMENT-;output data bit
    ADDRESS-116
      LABEL-
  FORMATTED-XOR s0, SPI_sck
  LOGFORMAT-XOR s0, SPI_sck[01]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_sck
  OP2 VALUE-01
    COMMENT-;clock High (bit0)
    ADDRESS-117
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-;drive clock High
    ADDRESS-118
      LABEL-
  FORMATTED-INPUT s3, SPI_input_port
  LOGFORMAT-INPUT s3, SPI_input_port[01]
INSTRUCTION-INPUT
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-SPI_input_port
  OP2 VALUE-01
    COMMENT-;read input bit
    ADDRESS-119
      LABEL-
  FORMATTED-TEST s3, SPI_amp_sdi
  LOGFORMAT-TEST s3, SPI_amp_sdi[40]
INSTRUCTION-TEST
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-SPI_amp_sdi
  OP2 VALUE-40
    COMMENT-;detect state of received bit
    ADDRESS-11A
      LABEL-
  FORMATTED-SLA s2
  LOGFORMAT-SLA s2
INSTRUCTION-SLA
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-;shift new data into result and move to next transmit bit
    ADDRESS-11B
      LABEL-
  FORMATTED-XOR s0, SPI_sck
  LOGFORMAT-XOR s0, SPI_sck[01]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_sck
  OP2 VALUE-01
    COMMENT-;clock Low (bit0)
    ADDRESS-11C
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-;drive clock Low
    ADDRESS-11D
      LABEL-
  FORMATTED-SUB s1, 01
  LOGFORMAT-SUB s1, 01
INSTRUCTION-SUB
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;count bits
    ADDRESS-11E
      LABEL-
  FORMATTED-JUMP NZ, next_amp_SPI_bit
  LOGFORMAT-JUMP NZ, next_amp_SPI_bit[115]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-next_amp_SPI_bit
  OP2 VALUE-115
    COMMENT-;repeat until finished
    ADDRESS-11F
      LABEL-
  FORMATTED-XOR s0, SPI_amp_cs
  LOGFORMAT-XOR s0, SPI_amp_cs[08]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_amp_cs
  OP2 VALUE-08
    COMMENT-;deselect the amplifier
    ADDRESS-120
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-
    ADDRESS-121
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;SPI communication routines for A/D Converter
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Sample A/D converter (LTC1407A-1) and return results.
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Note there is a latency of one read to obtain the value. Each read results in the
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the analogue inputs being sampled and converted but this value will only be transmitted
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;during the next read and conversion cycle.
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The results are returned as follows.
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   Channel 0 in registers [s9,s8]
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   Channel 1 in registers [s7,s6]
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Where each is a 14-bit twos complement value sign extended to 16-bits.
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Each 14-bit value represents the analogue voltage in the range -1.25v to +1.25v
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;relative to the reference voltage of 1.65v (3.3v/2). Hence the actual input voltage
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;range is 0.4v to 2.9v. Since the input to the A/D is supplied via the programmable
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;amplifier, the VINA and VINB inputs are inverted and may cover a smaller range if                       ;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;desired.
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Examples
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   VINA = 0.65v with gain=-1 means input to A/D = 2.65v
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      This is equivalent to +1.00v which is value (8192/1.25)*1 = 6553 (1999 hex)
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   VINA = 2.65v with gain=-1 means input to A/D = 0.65v
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      This is equivalent to -1.00v which is value (2048/1.25)*-1 = -6553 (E667 hex)
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Although the A/D converter claims to be an SPI device, it really
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;does not conform to the normal specification of the 4-wire interface.
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Firstly the CONV signal is only pulsed High and does not behave like
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;a normal active low select signal. Secondly, the communication is
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;34 bits which does not fit a byte boundary, and thirdly, the data output
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;to its SDO pin changes as a result of rising edges of SCK clock which
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;is not the same as the falling edge used by other devices.
    ADDRESS-122
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-122
      LABEL-adc_read
  FORMATTED-CALL SPI_init
  LOGFORMAT-CALL SPI_init[10E]
INSTRUCTION-CALL
   OPERAND1-SPI_init
  OP1 VALUE-10E
   OPERAND2-
  OP2 VALUE-
    COMMENT-;ensure known state of bus and s0 register
    ADDRESS-123
      LABEL-
  FORMATTED-XOR s0, SPI_adc_conv
  LOGFORMAT-XOR s0, SPI_adc_conv[10]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_adc_conv
  OP2 VALUE-10
    COMMENT-;Pulse AD-CONV High to take sample and start
    ADDRESS-124
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-;  conversion and transmission of data.
    ADDRESS-125
      LABEL-
  FORMATTED-XOR s0, SPI_adc_conv
  LOGFORMAT-XOR s0, SPI_adc_conv[10]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_adc_conv
  OP2 VALUE-10
    COMMENT-;AD-CONV Low
    ADDRESS-126
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-
    ADDRESS-127
      LABEL-
  FORMATTED-LOAD s1, 22
  LOGFORMAT-LOAD s1, 22
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-22
  OP2 VALUE-22
    COMMENT-;34 clocks to read all data
    ADDRESS-128
      LABEL-next_adc_bit
  FORMATTED-XOR s0, SPI_sck
  LOGFORMAT-XOR s0, SPI_sck[01]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_sck
  OP2 VALUE-01
    COMMENT-;clock High (bit0)
    ADDRESS-129
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-;drive clock High
    ADDRESS-12A
      LABEL-
  FORMATTED-XOR s0, SPI_sck
  LOGFORMAT-XOR s0, SPI_sck[01]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_sck
  OP2 VALUE-01
    COMMENT-;clock Low (bit0)
    ADDRESS-12B
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-;drive clock Low
    ADDRESS-12C
      LABEL-
  FORMATTED-INPUT s3, SPI_input_port
  LOGFORMAT-INPUT s3, SPI_input_port[01]
INSTRUCTION-INPUT
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-SPI_input_port
  OP2 VALUE-01
    COMMENT-;read input bit
    ADDRESS-12D
      LABEL-
  FORMATTED-TEST s3, SPI_sdi
  LOGFORMAT-TEST s3, SPI_sdi[80]
INSTRUCTION-TEST
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-SPI_sdi
  OP2 VALUE-80
    COMMENT-;detect state of received bit
    ADDRESS-12E
      LABEL-
  FORMATTED-SLA s6
  LOGFORMAT-SLA s6
INSTRUCTION-SLA
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-
  OP2 VALUE-
    COMMENT-;shift new data into result registers
    ADDRESS-12F
      LABEL-
  FORMATTED-SLA s7
  LOGFORMAT-SLA s7
INSTRUCTION-SLA
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-130
      LABEL-
  FORMATTED-SLA s8
  LOGFORMAT-SLA s8
INSTRUCTION-SLA
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-131
      LABEL-
  FORMATTED-SLA s9
  LOGFORMAT-SLA s9
INSTRUCTION-SLA
   OPERAND1-s9
  OP1 VALUE-s9
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-132
      LABEL-
  FORMATTED-SUB s1, 01
  LOGFORMAT-SUB s1, 01
INSTRUCTION-SUB
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;count bits
    ADDRESS-133
      LABEL-
  FORMATTED-JUMP NZ, next_adc_bit
  LOGFORMAT-JUMP NZ, next_adc_bit[128]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-next_adc_bit
  OP2 VALUE-128
    COMMENT-;repeat until finished
    ADDRESS-134
      LABEL-
  FORMATTED-SRX s9
  LOGFORMAT-SRX s9
INSTRUCTION-SRX
   OPERAND1-s9
  OP1 VALUE-s9
   OPERAND2-
  OP2 VALUE-
    COMMENT-;sign extend 14-bit result in [s9,s8]
    ADDRESS-135
      LABEL-
  FORMATTED-SRA s8
  LOGFORMAT-SRA s8
INSTRUCTION-SRA
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-136
      LABEL-
  FORMATTED-SRX s9
  LOGFORMAT-SRX s9
INSTRUCTION-SRX
   OPERAND1-s9
  OP1 VALUE-s9
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-137
      LABEL-
  FORMATTED-SRA s8
  LOGFORMAT-SRA s8
INSTRUCTION-SRA
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-138
      LABEL-
  FORMATTED-SRX s7
  LOGFORMAT-SRX s7
INSTRUCTION-SRX
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-
  OP2 VALUE-
    COMMENT-;sign extend 14-bit result in [s7,s6]
    ADDRESS-139
      LABEL-
  FORMATTED-SRA s6
  LOGFORMAT-SRA s6
INSTRUCTION-SRA
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-13A
      LABEL-
  FORMATTED-SRX s7
  LOGFORMAT-SRX s7
INSTRUCTION-SRX
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-13B
      LABEL-
  FORMATTED-SRA s6
  LOGFORMAT-SRA s6
INSTRUCTION-SRA
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-13C
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;D/A related: Send and receive one byte to and from the SPI D/A converter.
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The data supplied in register 's2' is transmitted to the SPI bus and
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;at the same time the received byte is used to replace the value in 's2'.
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The SCK clock is generated by software and results in a communication rate of
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;2.5Mbit/s with a 50MHz clock.
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Note that you must have previously selected the required device on the bus
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;before attempting communication and you must subsequently deselect the device
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;when appropriate.
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Entry to this routine assumes that register s0 defines the state of the SPI
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;control signals including SCK which should be Low. The easiest way to achieve this is
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;to use the SPI_init routine before calling this one for the first time.
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;As a 'master' the signal sequence is as follows..
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   Transmit data bit on SDO line
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   Drive SCK transition from low to high
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   Receive data bit from SDI line (D/A transmits on previous falling edge)
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   Drive SCK transition from high to low.
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Important note
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   The received data bit must be captured some time before SCK goes low.
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   However the combination of relatively slow clock to output time of the
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   LTC2624 combined with the low drive strength of its SDO output means that
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   the received bit needs maximum time to settle. Therefore this routine
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   schedules the read as late as it can.
    ADDRESS-13D
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-13D
      LABEL-SPI_dac_tx_rx
  FORMATTED-LOAD s1, 08
  LOGFORMAT-LOAD s1, 08
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-08
  OP2 VALUE-08
    COMMENT-;8-bits to transmit and receive
    ADDRESS-13E
      LABEL-next_SPI_dac_bit
  FORMATTED-OUTPUT s2, SPI_output_port
  LOGFORMAT-OUTPUT s2, SPI_output_port[04]
INSTRUCTION-OUTPUT
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-SPI_output_port
  OP2 VALUE-04
    COMMENT-;output data bit ready to be used on rising edge
    ADDRESS-13F
      LABEL-
  FORMATTED-XOR s0, SPI_sck
  LOGFORMAT-XOR s0, SPI_sck[01]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_sck
  OP2 VALUE-01
    COMMENT-;clock High (bit0)
    ADDRESS-140
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-;drive clock High
    ADDRESS-141
      LABEL-
  FORMATTED-XOR s0, SPI_sck
  LOGFORMAT-XOR s0, SPI_sck[01]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_sck
  OP2 VALUE-01
    COMMENT-;prepare clock Low (bit0)
    ADDRESS-142
      LABEL-
  FORMATTED-INPUT s3, SPI_input_port
  LOGFORMAT-INPUT s3, SPI_input_port[01]
INSTRUCTION-INPUT
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-SPI_input_port
  OP2 VALUE-01
    COMMENT-;read input bit
    ADDRESS-143
      LABEL-
  FORMATTED-TEST s3, SPI_sdi
  LOGFORMAT-TEST s3, SPI_sdi[80]
INSTRUCTION-TEST
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-SPI_sdi
  OP2 VALUE-80
    COMMENT-;detect state of received bit
    ADDRESS-144
      LABEL-
  FORMATTED-SLA s2
  LOGFORMAT-SLA s2
INSTRUCTION-SLA
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-
  OP2 VALUE-
    COMMENT-;shift new data into result and move to next transmit bit
    ADDRESS-145
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-;drive clock Low
    ADDRESS-146
      LABEL-
  FORMATTED-SUB s1, 01
  LOGFORMAT-SUB s1, 01
INSTRUCTION-SUB
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;count bits
    ADDRESS-147
      LABEL-
  FORMATTED-JUMP NZ, next_SPI_dac_bit
  LOGFORMAT-JUMP NZ, next_SPI_dac_bit[13E]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-next_SPI_dac_bit
  OP2 VALUE-13E
    COMMENT-;repeat until finished
    ADDRESS-148
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Set a voltage on one of the LTC2624 D/A converter outputs
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The D/A converter has 4 channels. Specify which channel is to be set using
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;register sC as follows....
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   sC     Channel                 Nominal Voltage Range
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   00        A                       0 to 3.30v (or VREFAB)
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   01        B                       0 to 3.30v (or VREFAB)
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   02        C                       0 to 2.50v (or VREFCD)
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   03        D                       0 to 2.50v (or VREFCD)
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;   0F        All channels            various as above.
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The analogue level is a 12-bit value to be supplied in lower 12-bits of register
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;pair [sB,sA]. If this value is called 'k' and is in the range 0 to 4095 (000 to FFF)
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;then
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      Vout = (k/4096) * VREFx
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Hence it is not possible to reach the absolute level of the reference.
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Here are some useful values..
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;    Voltage    A or B    C or D
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      0.0       000       000
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      0.5       26D       333
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      0.65      327               A/D reference -1.00v
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      1.0       4D9       666
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      1.5       746       99A
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      1.65      800       A8F     converter reference = 3.3/2 = 1.65v
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      2.0       9B2       CCD
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      2.5       C1F       FFF
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      2.65      CD9               A/D reference +1.00v
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      3.0       E8C       n/a
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;      3.3       FFF       n/a
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Note that the full scale deflection of FFF will result in different output
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;voltages due to different reference voltages for each pair of channels.
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;SPI communication with the DAC only requires a 24-bit word to be transmitted.
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;However, the device internally contains a 32-bit shift register. When writing
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;a command word, the previous contents are shifted out and can be observed by
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the master (Spartan-3E in this case). If you do not use a 32-bit format, then
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the read back is confusing. Hence this routine uses a 32-bit format by transmitting
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;a dummy byte first.
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  Byte 1 = 00   8 dummy bits
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  Byte 2 = 3c   Command nibble (3=write and update) and channel selection
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  Byte 3 = dd   Upper 8-bits of the 12-bit voltage value
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  Byte 4 = d0   lower 4-bits of the 12-bit voltage value and 4 dummy bits.
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;At the end of this communication, the register set [s9,s8,s7,s6] will contain the
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;data received back from the D/A converter which should be the previous command.
    ADDRESS-149
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-149
      LABEL-set_dac
  FORMATTED-CALL SPI_init
  LOGFORMAT-CALL SPI_init[10E]
INSTRUCTION-CALL
   OPERAND1-SPI_init
  OP1 VALUE-10E
   OPERAND2-
  OP2 VALUE-
    COMMENT-;ensure known state of bus and s0 register
    ADDRESS-14A
      LABEL-
  FORMATTED-XOR s0, SPI_dac_cs
  LOGFORMAT-XOR s0, SPI_dac_cs[20]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_dac_cs
  OP2 VALUE-20
    COMMENT-;select low on D/A converter
    ADDRESS-14B
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-
    ADDRESS-14C
      LABEL-
  FORMATTED-LOAD s2, 00
  LOGFORMAT-LOAD s2, 00
INSTRUCTION-LOAD
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;Write dummy byte to DAC
    ADDRESS-14D
      LABEL-
  FORMATTED-CALL SPI_dac_tx_rx
  LOGFORMAT-CALL SPI_dac_tx_rx[13D]
INSTRUCTION-CALL
   OPERAND1-SPI_dac_tx_rx
  OP1 VALUE-13D
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-14E
      LABEL-
  FORMATTED-LOAD s9, s2
  LOGFORMAT-LOAD s9, s2
INSTRUCTION-LOAD
   OPERAND1-s9
  OP1 VALUE-s9
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;capture response
    ADDRESS-14F
      LABEL-
  FORMATTED-LOAD s2, sC
  LOGFORMAT-LOAD s2, sC
INSTRUCTION-LOAD
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-sC
  OP2 VALUE-sC
    COMMENT-;Select channel for update
    ADDRESS-150
      LABEL-
  FORMATTED-AND s2, 0F
  LOGFORMAT-AND s2, 0F
INSTRUCTION-AND
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-0F
  OP2 VALUE-0F
    COMMENT-;isolate channel bits to be certain of correct command
    ADDRESS-151
      LABEL-
  FORMATTED-OR s2, 30
  LOGFORMAT-OR s2, 30
INSTRUCTION-OR
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-30
  OP2 VALUE-30
    COMMENT-;Use immediate Write and Update command is "0011"
    ADDRESS-152
      LABEL-
  FORMATTED-CALL SPI_dac_tx_rx
  LOGFORMAT-CALL SPI_dac_tx_rx[13D]
INSTRUCTION-CALL
   OPERAND1-SPI_dac_tx_rx
  OP1 VALUE-13D
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-153
      LABEL-
  FORMATTED-LOAD s8, s2
  LOGFORMAT-LOAD s8, s2
INSTRUCTION-LOAD
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;capture response
    ADDRESS-154
      LABEL-
  FORMATTED-SL0 sA
  LOGFORMAT-SL0 sA
INSTRUCTION-SL0
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-
  OP2 VALUE-
    COMMENT-;data shift bits into correct position
    ADDRESS-155
      LABEL-
  FORMATTED-SLA sB
  LOGFORMAT-SLA sB
INSTRUCTION-SLA
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;with 4 dummy bits ('0') in the least significant bits.
    ADDRESS-156
      LABEL-
  FORMATTED-SL0 sA
  LOGFORMAT-SL0 sA
INSTRUCTION-SL0
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-157
      LABEL-
  FORMATTED-SLA sB
  LOGFORMAT-SLA sB
INSTRUCTION-SLA
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-158
      LABEL-
  FORMATTED-SL0 sA
  LOGFORMAT-SL0 sA
INSTRUCTION-SL0
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-159
      LABEL-
  FORMATTED-SLA sB
  LOGFORMAT-SLA sB
INSTRUCTION-SLA
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-15A
      LABEL-
  FORMATTED-SL0 sA
  LOGFORMAT-SL0 sA
INSTRUCTION-SL0
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-15B
      LABEL-
  FORMATTED-SLA sB
  LOGFORMAT-SLA sB
INSTRUCTION-SLA
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-15C
      LABEL-
  FORMATTED-LOAD s2, sB
  LOGFORMAT-LOAD s2, sB
INSTRUCTION-LOAD
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-sB
  OP2 VALUE-sB
    COMMENT-;Write 12 bit value followed by 4 dummy bits
    ADDRESS-15D
      LABEL-
  FORMATTED-CALL SPI_dac_tx_rx
  LOGFORMAT-CALL SPI_dac_tx_rx[13D]
INSTRUCTION-CALL
   OPERAND1-SPI_dac_tx_rx
  OP1 VALUE-13D
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-15E
      LABEL-
  FORMATTED-LOAD s7, s2
  LOGFORMAT-LOAD s7, s2
INSTRUCTION-LOAD
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;capture response
    ADDRESS-15F
      LABEL-
  FORMATTED-LOAD s2, sA
  LOGFORMAT-LOAD s2, sA
INSTRUCTION-LOAD
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-sA
  OP2 VALUE-sA
    COMMENT-
    ADDRESS-160
      LABEL-
  FORMATTED-CALL SPI_dac_tx_rx
  LOGFORMAT-CALL SPI_dac_tx_rx[13D]
INSTRUCTION-CALL
   OPERAND1-SPI_dac_tx_rx
  OP1 VALUE-13D
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-161
      LABEL-
  FORMATTED-LOAD s6, s2
  LOGFORMAT-LOAD s6, s2
INSTRUCTION-LOAD
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;capture response
    ADDRESS-162
      LABEL-
  FORMATTED-XOR s0, SPI_dac_cs
  LOGFORMAT-XOR s0, SPI_dac_cs[20]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_dac_cs
  OP2 VALUE-20
    COMMENT-;deselect the D/A converter to execute
    ADDRESS-163
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-
    ADDRESS-164
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-165
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-165
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Perform a hard reset of the D/A converter
    ADDRESS-165
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-165
      LABEL-dac_reset
  FORMATTED-CALL SPI_init
  LOGFORMAT-CALL SPI_init[10E]
INSTRUCTION-CALL
   OPERAND1-SPI_init
  OP1 VALUE-10E
   OPERAND2-
  OP2 VALUE-
    COMMENT-;ensure known state of bus and s0 register
    ADDRESS-166
      LABEL-
  FORMATTED-XOR s0, SPI_dac_clr
  LOGFORMAT-XOR s0, SPI_dac_clr[80]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_dac_clr
  OP2 VALUE-80
    COMMENT-;pulse the clear signal.
    ADDRESS-167
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-
    ADDRESS-168
      LABEL-
  FORMATTED-XOR s0, SPI_dac_clr
  LOGFORMAT-XOR s0, SPI_dac_clr[80]
INSTRUCTION-XOR
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_dac_clr
  OP2 VALUE-80
    COMMENT-
    ADDRESS-169
      LABEL-
  FORMATTED-OUTPUT s0, SPI_control_port
  LOGFORMAT-OUTPUT s0, SPI_control_port[08]
INSTRUCTION-OUTPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-SPI_control_port
  OP2 VALUE-08
    COMMENT-
    ADDRESS-16A
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LCD text messages
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Display 'PicoBlaze' on LCD at current cursor position
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-16B
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-16B
      LABEL-disp_PicoBlaze
  FORMATTED-LOAD s5, character_P
  LOGFORMAT-LOAD s5, character_P[50]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_P
  OP2 VALUE-50
    COMMENT-
    ADDRESS-16C
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-16D
      LABEL-
  FORMATTED-LOAD s5, character_i
  LOGFORMAT-LOAD s5, character_i[69]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_i
  OP2 VALUE-69
    COMMENT-
    ADDRESS-16E
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-16F
      LABEL-
  FORMATTED-LOAD s5, character_c
  LOGFORMAT-LOAD s5, character_c[63]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_c
  OP2 VALUE-63
    COMMENT-
    ADDRESS-170
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-171
      LABEL-
  FORMATTED-LOAD s5, character_o
  LOGFORMAT-LOAD s5, character_o[6F]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_o
  OP2 VALUE-6F
    COMMENT-
    ADDRESS-172
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-173
      LABEL-
  FORMATTED-LOAD s5, character_B
  LOGFORMAT-LOAD s5, character_B[42]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_B
  OP2 VALUE-42
    COMMENT-
    ADDRESS-174
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-175
      LABEL-
  FORMATTED-LOAD s5, character_l
  LOGFORMAT-LOAD s5, character_l[6C]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_l
  OP2 VALUE-6C
    COMMENT-
    ADDRESS-176
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-177
      LABEL-
  FORMATTED-LOAD s5, character_a
  LOGFORMAT-LOAD s5, character_a[61]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_a
  OP2 VALUE-61
    COMMENT-
    ADDRESS-178
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-179
      LABEL-
  FORMATTED-LOAD s5, character_z
  LOGFORMAT-LOAD s5, character_z[7A]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_z
  OP2 VALUE-7A
    COMMENT-
    ADDRESS-17A
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-17B
      LABEL-
  FORMATTED-LOAD s5, character_e
  LOGFORMAT-LOAD s5, character_e[65]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_e
  OP2 VALUE-65
    COMMENT-
    ADDRESS-17C
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-17D
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-17E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-17E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-17E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Display 'ADC Control' on LCD at current cursor position
    ADDRESS-17E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-17E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-17E
      LABEL-disp_ADC_Control
  FORMATTED-LOAD s5, character_A
  LOGFORMAT-LOAD s5, character_A[41]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_A
  OP2 VALUE-41
    COMMENT-
    ADDRESS-17F
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-180
      LABEL-
  FORMATTED-LOAD s5, character_D
  LOGFORMAT-LOAD s5, character_D[44]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_D
  OP2 VALUE-44
    COMMENT-
    ADDRESS-181
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-182
      LABEL-
  FORMATTED-LOAD s5, character_C
  LOGFORMAT-LOAD s5, character_C[43]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_C
  OP2 VALUE-43
    COMMENT-
    ADDRESS-183
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-184
      LABEL-
  FORMATTED-LOAD s5, character_space
  LOGFORMAT-LOAD s5, character_space[20]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_space
  OP2 VALUE-20
    COMMENT-
    ADDRESS-185
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-186
      LABEL-
  FORMATTED-LOAD s5, character_C
  LOGFORMAT-LOAD s5, character_C[43]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_C
  OP2 VALUE-43
    COMMENT-
    ADDRESS-187
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-188
      LABEL-
  FORMATTED-LOAD s5, character_o
  LOGFORMAT-LOAD s5, character_o[6F]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_o
  OP2 VALUE-6F
    COMMENT-
    ADDRESS-189
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-18A
      LABEL-
  FORMATTED-LOAD s5, character_n
  LOGFORMAT-LOAD s5, character_n[6E]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_n
  OP2 VALUE-6E
    COMMENT-
    ADDRESS-18B
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-18C
      LABEL-
  FORMATTED-LOAD s5, character_t
  LOGFORMAT-LOAD s5, character_t[74]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_t
  OP2 VALUE-74
    COMMENT-
    ADDRESS-18D
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-18E
      LABEL-
  FORMATTED-LOAD s5, character_r
  LOGFORMAT-LOAD s5, character_r[72]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_r
  OP2 VALUE-72
    COMMENT-
    ADDRESS-18F
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-190
      LABEL-
  FORMATTED-LOAD s5, character_o
  LOGFORMAT-LOAD s5, character_o[6F]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_o
  OP2 VALUE-6F
    COMMENT-
    ADDRESS-191
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-192
      LABEL-
  FORMATTED-LOAD s5, character_l
  LOGFORMAT-LOAD s5, character_l[6C]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_l
  OP2 VALUE-6C
    COMMENT-
    ADDRESS-193
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-194
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-195
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-195
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-195
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Display 'VA=' on LCD at current cursor position
    ADDRESS-195
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-195
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-195
      LABEL-disp_VA
  FORMATTED-LOAD s5, character_V
  LOGFORMAT-LOAD s5, character_V[56]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_V
  OP2 VALUE-56
    COMMENT-
    ADDRESS-196
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-197
      LABEL-
  FORMATTED-LOAD s5, character_A
  LOGFORMAT-LOAD s5, character_A[41]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_A
  OP2 VALUE-41
    COMMENT-
    ADDRESS-198
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-199
      LABEL-
  FORMATTED-LOAD s5, character_equals
  LOGFORMAT-LOAD s5, character_equals[3D]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_equals
  OP2 VALUE-3D
    COMMENT-
    ADDRESS-19A
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-19B
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-19C
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-19C
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-19C
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Display 'A/D' on LCD at current cursor position
    ADDRESS-19C
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-19C
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-19C
      LABEL-disp_AD
  FORMATTED-LOAD s5, character_A
  LOGFORMAT-LOAD s5, character_A[41]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_A
  OP2 VALUE-41
    COMMENT-
    ADDRESS-19D
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-19E
      LABEL-
  FORMATTED-LOAD s5, character_divide
  LOGFORMAT-LOAD s5, character_divide[2F]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_divide
  OP2 VALUE-2F
    COMMENT-
    ADDRESS-19F
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1A0
      LABEL-
  FORMATTED-LOAD s5, character_D
  LOGFORMAT-LOAD s5, character_D[44]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_D
  OP2 VALUE-44
    COMMENT-
    ADDRESS-1A1
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1A2
      LABEL-
  FORMATTED-LOAD s5, character_equals
  LOGFORMAT-LOAD s5, character_equals[3D]
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-character_equals
  OP2 VALUE-3D
    COMMENT-
    ADDRESS-1A3
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1A4
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Value to ASCII Conversions and LCD display
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Convert hexadecimal value provided in register s0 into ASCII characters
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The value provided must can be any value in the range 00 to FF and will be converted into
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;two ASCII characters.
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;     The upper nibble will be represented by an ASCII character returned in register s2.
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;     The lower nibble will be represented by an ASCII character returned in register s1.
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The ASCII representations of '0' to '9' are 30 to 39 hexadecimal which is simply 30 hex
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;added to the actual decimal value. The ASCII representations of 'A' to 'F' are 41 to 46
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;hexadecimal requiring a further addition of 07 to the 30 already added.
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1 and s2.
    ADDRESS-1A5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1A5
      LABEL-hex_byte_to_ASCII
  FORMATTED-LOAD s1, s0
  LOGFORMAT-LOAD s1, s0
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-s0
  OP2 VALUE-s0
    COMMENT-;remember value supplied
    ADDRESS-1A6
      LABEL-
  FORMATTED-SR0 s0
  LOGFORMAT-SR0 s0
INSTRUCTION-SR0
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-;isolate upper nibble
    ADDRESS-1A7
      LABEL-
  FORMATTED-SR0 s0
  LOGFORMAT-SR0 s0
INSTRUCTION-SR0
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1A8
      LABEL-
  FORMATTED-SR0 s0
  LOGFORMAT-SR0 s0
INSTRUCTION-SR0
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1A9
      LABEL-
  FORMATTED-SR0 s0
  LOGFORMAT-SR0 s0
INSTRUCTION-SR0
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1AA
      LABEL-
  FORMATTED-CALL hex_to_ASCII
  LOGFORMAT-CALL hex_to_ASCII[1B1]
INSTRUCTION-CALL
   OPERAND1-hex_to_ASCII
  OP1 VALUE-1B1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;convert
    ADDRESS-1AB
      LABEL-
  FORMATTED-LOAD s2, s0
  LOGFORMAT-LOAD s2, s0
INSTRUCTION-LOAD
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-s0
  OP2 VALUE-s0
    COMMENT-;upper nibble value in s2
    ADDRESS-1AC
      LABEL-
  FORMATTED-LOAD s0, s1
  LOGFORMAT-LOAD s0, s1
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-s1
  OP2 VALUE-s1
    COMMENT-;restore complete value
    ADDRESS-1AD
      LABEL-
  FORMATTED-AND s0, 0F
  LOGFORMAT-AND s0, 0F
INSTRUCTION-AND
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-0F
  OP2 VALUE-0F
    COMMENT-;isolate lower nibble
    ADDRESS-1AE
      LABEL-
  FORMATTED-CALL hex_to_ASCII
  LOGFORMAT-CALL hex_to_ASCII[1B1]
INSTRUCTION-CALL
   OPERAND1-hex_to_ASCII
  OP1 VALUE-1B1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;convert
    ADDRESS-1AF
      LABEL-
  FORMATTED-LOAD s1, s0
  LOGFORMAT-LOAD s1, s0
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-s0
  OP2 VALUE-s0
    COMMENT-;lower nibble value in s1
    ADDRESS-1B0
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1B1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1B1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Convert hexadecimal value provided in register s0 into ASCII character
    ADDRESS-1B1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1B1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Register used s0
    ADDRESS-1B1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1B1
      LABEL-hex_to_ASCII
  FORMATTED-SUB s0, 0A
  LOGFORMAT-SUB s0, 0A
INSTRUCTION-SUB
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-0A
  OP2 VALUE-0A
    COMMENT-;test if value is in range 0 to 9
    ADDRESS-1B2
      LABEL-
  FORMATTED-JUMP C, number_char
  LOGFORMAT-JUMP C, number_char[1B4]
INSTRUCTION-JUMP
   OPERAND1-C
  OP1 VALUE-C
   OPERAND2-number_char
  OP2 VALUE-1B4
    COMMENT-
    ADDRESS-1B3
      LABEL-
  FORMATTED-ADD s0, 07
  LOGFORMAT-ADD s0, 07
INSTRUCTION-ADD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-07
  OP2 VALUE-07
    COMMENT-;ASCII char A to F in range 41 to 46
    ADDRESS-1B4
      LABEL-number_char
  FORMATTED-ADD s0, 3A
  LOGFORMAT-ADD s0, 3A
INSTRUCTION-ADD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-3A
  OP2 VALUE-3A
    COMMENT-;ASCII char 0 to 9 in range 30 to 40
    ADDRESS-1B5
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1B6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1B6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1B6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Display the two character HEX value of the register contents 's0' on
    ADDRESS-1B6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the LCD display at the current cursor position.
    ADDRESS-1B6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1B6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s2, s4, s5, s6
    ADDRESS-1B6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1B6
      LABEL-disp_hex_byte
  FORMATTED-CALL hex_byte_to_ASCII
  LOGFORMAT-CALL hex_byte_to_ASCII[1A5]
INSTRUCTION-CALL
   OPERAND1-hex_byte_to_ASCII
  OP1 VALUE-1A5
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1B7
      LABEL-
  FORMATTED-LOAD s6, s1
  LOGFORMAT-LOAD s6, s1
INSTRUCTION-LOAD
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-s1
  OP2 VALUE-s1
    COMMENT-;remember lower hex character
    ADDRESS-1B8
      LABEL-
  FORMATTED-LOAD s5, s2
  LOGFORMAT-LOAD s5, s2
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-s2
  OP2 VALUE-s2
    COMMENT-;display upper hex character
    ADDRESS-1B9
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1BA
      LABEL-
  FORMATTED-LOAD s5, s6
  LOGFORMAT-LOAD s5, s6
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-s6
  OP2 VALUE-s6
    COMMENT-;display lower hex character
    ADDRESS-1BB
      LABEL-
  FORMATTED-CALL LCD_write_data
  LOGFORMAT-CALL LCD_write_data[1EE]
INSTRUCTION-CALL
   OPERAND1-LCD_write_data
  OP1 VALUE-1EE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1BC
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Software delay routines
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Delay of 1us.
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Constant value defines reflects the clock applied to KCPSM3. Every instruction
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;executes in 2 clock cycles making the calculation highly predictable. The '6' in
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the following equation even allows for 'CALL delay_1us' instruction in the initiating code.
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; delay_1us_constant =  (clock_rate - 6)/4       Where 'clock_rate' is in MHz
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0
    ADDRESS-1BD
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1BD
      LABEL-delay_1us
  FORMATTED-LOAD s0, delay_1us_constant
  LOGFORMAT-LOAD s0, delay_1us_constant[0B]
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-delay_1us_constant
  OP2 VALUE-0B
    COMMENT-
    ADDRESS-1BE
      LABEL-wait_1us
  FORMATTED-SUB s0, 01
  LOGFORMAT-SUB s0, 01
INSTRUCTION-SUB
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-1BF
      LABEL-
  FORMATTED-JUMP NZ, wait_1us
  LOGFORMAT-JUMP NZ, wait_1us[1BE]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_1us
  OP2 VALUE-1BE
    COMMENT-
    ADDRESS-1C0
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1C1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1C1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Delay of 40us.
    ADDRESS-1C1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1C1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1
    ADDRESS-1C1
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1C1
      LABEL-delay_40us
  FORMATTED-LOAD s1, 28
  LOGFORMAT-LOAD s1, 28
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-28
  OP2 VALUE-28
    COMMENT-;40 x 1us = 40us
    ADDRESS-1C2
      LABEL-wait_40us
  FORMATTED-CALL delay_1us
  LOGFORMAT-CALL delay_1us[1BD]
INSTRUCTION-CALL
   OPERAND1-delay_1us
  OP1 VALUE-1BD
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1C3
      LABEL-
  FORMATTED-SUB s1, 01
  LOGFORMAT-SUB s1, 01
INSTRUCTION-SUB
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-1C4
      LABEL-
  FORMATTED-JUMP NZ, wait_40us
  LOGFORMAT-JUMP NZ, wait_40us[1C2]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_40us
  OP2 VALUE-1C2
    COMMENT-
    ADDRESS-1C5
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1C6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1C6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1C6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Delay of 1ms.
    ADDRESS-1C6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1C6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s2
    ADDRESS-1C6
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1C6
      LABEL-delay_1ms
  FORMATTED-LOAD s2, 19
  LOGFORMAT-LOAD s2, 19
INSTRUCTION-LOAD
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-19
  OP2 VALUE-19
    COMMENT-;25 x 40us = 1ms
    ADDRESS-1C7
      LABEL-wait_1ms
  FORMATTED-CALL delay_40us
  LOGFORMAT-CALL delay_40us[1C1]
INSTRUCTION-CALL
   OPERAND1-delay_40us
  OP1 VALUE-1C1
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1C8
      LABEL-
  FORMATTED-SUB s2, 01
  LOGFORMAT-SUB s2, 01
INSTRUCTION-SUB
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-1C9
      LABEL-
  FORMATTED-JUMP NZ, wait_1ms
  LOGFORMAT-JUMP NZ, wait_1ms[1C7]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_1ms
  OP2 VALUE-1C7
    COMMENT-
    ADDRESS-1CA
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1CB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1CB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Delay of 20ms.
    ADDRESS-1CB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1CB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Delay of 20ms used during initialisation.
    ADDRESS-1CB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1CB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s2, s3
    ADDRESS-1CB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1CB
      LABEL-delay_20ms
  FORMATTED-LOAD s3, 14
  LOGFORMAT-LOAD s3, 14
INSTRUCTION-LOAD
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-14
  OP2 VALUE-14
    COMMENT-;20 x 1ms = 20ms
    ADDRESS-1CC
      LABEL-wait_20ms
  FORMATTED-CALL delay_1ms
  LOGFORMAT-CALL delay_1ms[1C6]
INSTRUCTION-CALL
   OPERAND1-delay_1ms
  OP1 VALUE-1C6
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1CD
      LABEL-
  FORMATTED-SUB s3, 01
  LOGFORMAT-SUB s3, 01
INSTRUCTION-SUB
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-1CE
      LABEL-
  FORMATTED-JUMP NZ, wait_20ms
  LOGFORMAT-JUMP NZ, wait_20ms[1CC]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_20ms
  OP2 VALUE-1CC
    COMMENT-
    ADDRESS-1CF
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1D0
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D0
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Delay of approximately 1 second.
    ADDRESS-1D0
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D0
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s2, s3, s4
    ADDRESS-1D0
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D0
      LABEL-delay_1s
  FORMATTED-LOAD s4, 32
  LOGFORMAT-LOAD s4, 32
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-32
  OP2 VALUE-32
    COMMENT-;50 x 20ms = 1000ms
    ADDRESS-1D1
      LABEL-wait_1s
  FORMATTED-CALL delay_20ms
  LOGFORMAT-CALL delay_20ms[1CB]
INSTRUCTION-CALL
   OPERAND1-delay_20ms
  OP1 VALUE-1CB
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1D2
      LABEL-
  FORMATTED-SUB s4, 01
  LOGFORMAT-SUB s4, 01
INSTRUCTION-SUB
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-1D3
      LABEL-
  FORMATTED-JUMP NZ, wait_1s
  LOGFORMAT-JUMP NZ, wait_1s[1D1]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_1s
  OP2 VALUE-1D1
    COMMENT-
    ADDRESS-1D4
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LCD Character Module Routines
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;LCD module is a 16 character by 2 line display but all displays are very similar
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The 4-wire data interface will be used (DB4 to DB7).
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The LCD modules are relatively slow and software delay loops are used to slow down
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;KCPSM3 adequately for the LCD to communicate. The delay routines are provided in
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;a different section (see above in this case).
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Pulse LCD enable signal 'E' high for greater than 230ns (1us is used).
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Register s4 should define the current state of the LCD output port.
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s4
    ADDRESS-1D5
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1D5
      LABEL-LCD_pulse_E
  FORMATTED-XOR s4, LCD_E
  LOGFORMAT-XOR s4, LCD_E[01]
INSTRUCTION-XOR
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_E
  OP2 VALUE-01
    COMMENT-;E=1
    ADDRESS-1D6
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-
    ADDRESS-1D7
      LABEL-
  FORMATTED-CALL delay_1us
  LOGFORMAT-CALL delay_1us[1BD]
INSTRUCTION-CALL
   OPERAND1-delay_1us
  OP1 VALUE-1BD
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1D8
      LABEL-
  FORMATTED-XOR s4, LCD_E
  LOGFORMAT-XOR s4, LCD_E[01]
INSTRUCTION-XOR
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_E
  OP2 VALUE-01
    COMMENT-;E=0
    ADDRESS-1D9
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-
    ADDRESS-1DA
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Write 4-bit instruction to LCD display.
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The 4-bit instruction should be provided in the upper 4-bits of register s4.
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Note that this routine does not release the master enable but as it is only
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;used during initialisation and as part of the 8-bit instruction write it
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;should be acceptable.
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s4
    ADDRESS-1DB
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DB
      LABEL-LCD_write_inst4
  FORMATTED-AND s4, F8
  LOGFORMAT-AND s4, F8
INSTRUCTION-AND
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-F8
  OP2 VALUE-F8
    COMMENT-;Enable=1 RS=0 Instruction, RW=0 Write, E=0
    ADDRESS-1DC
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-;set up RS and RW >40ns before enable pulse
    ADDRESS-1DD
      LABEL-
  FORMATTED-CALL LCD_pulse_E
  LOGFORMAT-CALL LCD_pulse_E[1D5]
INSTRUCTION-CALL
   OPERAND1-LCD_pulse_E
  OP1 VALUE-1D5
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1DE
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Write 8-bit instruction to LCD display.
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The 8-bit instruction should be provided in register s5.
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Instructions are written using the following sequence
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Upper nibble
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; wait >1us
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Lower nibble
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; wait >40us
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s4, s5
    ADDRESS-1DF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1DF
      LABEL-LCD_write_inst8
  FORMATTED-LOAD s4, s5
  LOGFORMAT-LOAD s4, s5
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s5
  OP2 VALUE-s5
    COMMENT-
    ADDRESS-1E0
      LABEL-
  FORMATTED-AND s4, F0
  LOGFORMAT-AND s4, F0
INSTRUCTION-AND
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-F0
  OP2 VALUE-F0
    COMMENT-;Enable=0 RS=0 Instruction, RW=0 Write, E=0
    ADDRESS-1E1
      LABEL-
  FORMATTED-OR s4, LCD_drive
  LOGFORMAT-OR s4, LCD_drive[08]
INSTRUCTION-OR
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_drive
  OP2 VALUE-08
    COMMENT-;Enable=1
    ADDRESS-1E2
      LABEL-
  FORMATTED-CALL LCD_write_inst4
  LOGFORMAT-CALL LCD_write_inst4[1DB]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst4
  OP1 VALUE-1DB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;write upper nibble
    ADDRESS-1E3
      LABEL-
  FORMATTED-CALL delay_1us
  LOGFORMAT-CALL delay_1us[1BD]
INSTRUCTION-CALL
   OPERAND1-delay_1us
  OP1 VALUE-1BD
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >1us
    ADDRESS-1E4
      LABEL-
  FORMATTED-LOAD s4, s5
  LOGFORMAT-LOAD s4, s5
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s5
  OP2 VALUE-s5
    COMMENT-;select lower nibble with
    ADDRESS-1E5
      LABEL-
  FORMATTED-SL1 s4
  LOGFORMAT-SL1 s4
INSTRUCTION-SL1
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Enable=1
    ADDRESS-1E6
      LABEL-
  FORMATTED-SL0 s4
  LOGFORMAT-SL0 s4
INSTRUCTION-SL0
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-
  OP2 VALUE-
    COMMENT-;RS=0 Instruction
    ADDRESS-1E7
      LABEL-
  FORMATTED-SL0 s4
  LOGFORMAT-SL0 s4
INSTRUCTION-SL0
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-
  OP2 VALUE-
    COMMENT-;RW=0 Write
    ADDRESS-1E8
      LABEL-
  FORMATTED-SL0 s4
  LOGFORMAT-SL0 s4
INSTRUCTION-SL0
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-
  OP2 VALUE-
    COMMENT-;E=0
    ADDRESS-1E9
      LABEL-
  FORMATTED-CALL LCD_write_inst4
  LOGFORMAT-CALL LCD_write_inst4[1DB]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst4
  OP1 VALUE-1DB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;write lower nibble
    ADDRESS-1EA
      LABEL-
  FORMATTED-CALL delay_40us
  LOGFORMAT-CALL delay_40us[1C1]
INSTRUCTION-CALL
   OPERAND1-delay_40us
  OP1 VALUE-1C1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >40us
    ADDRESS-1EB
      LABEL-
  FORMATTED-LOAD s4, F0
  LOGFORMAT-LOAD s4, F0
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-F0
  OP2 VALUE-F0
    COMMENT-;Enable=0 RS=0 Instruction, RW=0 Write, E=0
    ADDRESS-1EC
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-;Release master enable
    ADDRESS-1ED
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Write 8-bit data to LCD display.
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The 8-bit data should be provided in register s5.
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Data bytes are written using the following sequence
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Upper nibble
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; wait >1us
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Lower nibble
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; wait >40us
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s4, s5
    ADDRESS-1EE
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1EE
      LABEL-LCD_write_data
  FORMATTED-LOAD s4, s5
  LOGFORMAT-LOAD s4, s5
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s5
  OP2 VALUE-s5
    COMMENT-
    ADDRESS-1EF
      LABEL-
  FORMATTED-AND s4, F0
  LOGFORMAT-AND s4, F0
INSTRUCTION-AND
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-F0
  OP2 VALUE-F0
    COMMENT-;Enable=0 RS=0 Instruction, RW=0 Write, E=0
    ADDRESS-1F0
      LABEL-
  FORMATTED-OR s4, 0C
  LOGFORMAT-OR s4, 0C
INSTRUCTION-OR
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-0C
  OP2 VALUE-0C
    COMMENT-;Enable=1 RS=1 Data, RW=0 Write, E=0
    ADDRESS-1F1
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-;set up RS and RW >40ns before enable pulse
    ADDRESS-1F2
      LABEL-
  FORMATTED-CALL LCD_pulse_E
  LOGFORMAT-CALL LCD_pulse_E[1D5]
INSTRUCTION-CALL
   OPERAND1-LCD_pulse_E
  OP1 VALUE-1D5
   OPERAND2-
  OP2 VALUE-
    COMMENT-;write upper nibble
    ADDRESS-1F3
      LABEL-
  FORMATTED-CALL delay_1us
  LOGFORMAT-CALL delay_1us[1BD]
INSTRUCTION-CALL
   OPERAND1-delay_1us
  OP1 VALUE-1BD
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >1us
    ADDRESS-1F4
      LABEL-
  FORMATTED-LOAD s4, s5
  LOGFORMAT-LOAD s4, s5
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-s5
  OP2 VALUE-s5
    COMMENT-;select lower nibble with
    ADDRESS-1F5
      LABEL-
  FORMATTED-SL1 s4
  LOGFORMAT-SL1 s4
INSTRUCTION-SL1
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Enable=1
    ADDRESS-1F6
      LABEL-
  FORMATTED-SL1 s4
  LOGFORMAT-SL1 s4
INSTRUCTION-SL1
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-
  OP2 VALUE-
    COMMENT-;RS=1 Data
    ADDRESS-1F7
      LABEL-
  FORMATTED-SL0 s4
  LOGFORMAT-SL0 s4
INSTRUCTION-SL0
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-
  OP2 VALUE-
    COMMENT-;RW=0 Write
    ADDRESS-1F8
      LABEL-
  FORMATTED-SL0 s4
  LOGFORMAT-SL0 s4
INSTRUCTION-SL0
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-
  OP2 VALUE-
    COMMENT-;E=0
    ADDRESS-1F9
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-;set up RS and RW >40ns before enable pulse
    ADDRESS-1FA
      LABEL-
  FORMATTED-CALL LCD_pulse_E
  LOGFORMAT-CALL LCD_pulse_E[1D5]
INSTRUCTION-CALL
   OPERAND1-LCD_pulse_E
  OP1 VALUE-1D5
   OPERAND2-
  OP2 VALUE-
    COMMENT-;write lower nibble
    ADDRESS-1FB
      LABEL-
  FORMATTED-CALL delay_40us
  LOGFORMAT-CALL delay_40us[1C1]
INSTRUCTION-CALL
   OPERAND1-delay_40us
  OP1 VALUE-1C1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >40us
    ADDRESS-1FC
      LABEL-
  FORMATTED-LOAD s4, F0
  LOGFORMAT-LOAD s4, F0
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-F0
  OP2 VALUE-F0
    COMMENT-;Enable=0 RS=0 Instruction, RW=0 Write, E=0
    ADDRESS-1FD
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-;Release master enable
    ADDRESS-1FE
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Read 8-bit data from LCD display.
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The 8-bit data will be read from the current LCD memory address
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;and will be returned in register s5.
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;It is advisable to set the LCD address (cursor position) before
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;using the data read for the first time otherwise the display may
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;generate invalid data on the first read.
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Data bytes are read using the following sequence
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Upper nibble
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; wait >1us
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Lower nibble
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; wait >40us
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s4, s5
    ADDRESS-1FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-1FF
      LABEL-LCD_read_data8
  FORMATTED-LOAD s4, 0E
  LOGFORMAT-LOAD s4, 0E
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-0E
  OP2 VALUE-0E
    COMMENT-;Enable=1 RS=1 Data, RW=1 Read, E=0
    ADDRESS-200
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-;set up RS and RW >40ns before enable pulse
    ADDRESS-201
      LABEL-
  FORMATTED-XOR s4, LCD_E
  LOGFORMAT-XOR s4, LCD_E[01]
INSTRUCTION-XOR
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_E
  OP2 VALUE-01
    COMMENT-;E=1
    ADDRESS-202
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-
    ADDRESS-203
      LABEL-
  FORMATTED-CALL delay_1us
  LOGFORMAT-CALL delay_1us[1BD]
INSTRUCTION-CALL
   OPERAND1-delay_1us
  OP1 VALUE-1BD
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >260ns to access data
    ADDRESS-204
      LABEL-
  FORMATTED-INPUT s5, LCD_input_port
  LOGFORMAT-INPUT s5, LCD_input_port[02]
INSTRUCTION-INPUT
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-LCD_input_port
  OP2 VALUE-02
    COMMENT-;read upper nibble
    ADDRESS-205
      LABEL-
  FORMATTED-XOR s4, LCD_E
  LOGFORMAT-XOR s4, LCD_E[01]
INSTRUCTION-XOR
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_E
  OP2 VALUE-01
    COMMENT-;E=0
    ADDRESS-206
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-
    ADDRESS-207
      LABEL-
  FORMATTED-CALL delay_1us
  LOGFORMAT-CALL delay_1us[1BD]
INSTRUCTION-CALL
   OPERAND1-delay_1us
  OP1 VALUE-1BD
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >1us
    ADDRESS-208
      LABEL-
  FORMATTED-XOR s4, LCD_E
  LOGFORMAT-XOR s4, LCD_E[01]
INSTRUCTION-XOR
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_E
  OP2 VALUE-01
    COMMENT-;E=1
    ADDRESS-209
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-
    ADDRESS-20A
      LABEL-
  FORMATTED-CALL delay_1us
  LOGFORMAT-CALL delay_1us[1BD]
INSTRUCTION-CALL
   OPERAND1-delay_1us
  OP1 VALUE-1BD
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >260ns to access data
    ADDRESS-20B
      LABEL-
  FORMATTED-INPUT s0, LCD_input_port
  LOGFORMAT-INPUT s0, LCD_input_port[02]
INSTRUCTION-INPUT
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-LCD_input_port
  OP2 VALUE-02
    COMMENT-;read lower nibble
    ADDRESS-20C
      LABEL-
  FORMATTED-XOR s4, LCD_E
  LOGFORMAT-XOR s4, LCD_E[01]
INSTRUCTION-XOR
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_E
  OP2 VALUE-01
    COMMENT-;E=0
    ADDRESS-20D
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-
    ADDRESS-20E
      LABEL-
  FORMATTED-AND s5, F0
  LOGFORMAT-AND s5, F0
INSTRUCTION-AND
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-F0
  OP2 VALUE-F0
    COMMENT-;merge upper and lower nibbles
    ADDRESS-20F
      LABEL-
  FORMATTED-SR0 s0
  LOGFORMAT-SR0 s0
INSTRUCTION-SR0
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-210
      LABEL-
  FORMATTED-SR0 s0
  LOGFORMAT-SR0 s0
INSTRUCTION-SR0
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-211
      LABEL-
  FORMATTED-SR0 s0
  LOGFORMAT-SR0 s0
INSTRUCTION-SR0
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-212
      LABEL-
  FORMATTED-SR0 s0
  LOGFORMAT-SR0 s0
INSTRUCTION-SR0
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-213
      LABEL-
  FORMATTED-OR s5, s0
  LOGFORMAT-OR s5, s0
INSTRUCTION-OR
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-s0
  OP2 VALUE-s0
    COMMENT-
    ADDRESS-214
      LABEL-
  FORMATTED-LOAD s4, 04
  LOGFORMAT-LOAD s4, 04
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-04
  OP2 VALUE-04
    COMMENT-;Enable=0 RS=1 Data, RW=0 Write, E=0
    ADDRESS-215
      LABEL-
  FORMATTED-OUTPUT s4, LCD_output_port
  LOGFORMAT-OUTPUT s4, LCD_output_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-LCD_output_port
  OP2 VALUE-40
    COMMENT-;Stop reading 5V device and release master enable
    ADDRESS-216
      LABEL-
  FORMATTED-CALL delay_40us
  LOGFORMAT-CALL delay_40us[1C1]
INSTRUCTION-CALL
   OPERAND1-delay_40us
  OP1 VALUE-1C1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >40us
    ADDRESS-217
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Reset and initialise display to communicate using 4-bit data mode
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Includes routine to clear the display.
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Requires the 4-bit instructions 3,3,3,2 to be sent with suitable delays
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;following by the 8-bit instructions to set up the display.
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  28 = '001' Function set, '0' 4-bit mode, '1' 2-line, '0' 5x7 dot matrix, 'xx'
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  06 = '000001' Entry mode, '1' increment, '0' no display shift
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  0C = '00001' Display control, '1' display on, '0' cursor off, '0' cursor blink off
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;  01 = '00000001' Display clear
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s2, s3, s4
    ADDRESS-218
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-218
      LABEL-LCD_reset
  FORMATTED-CALL delay_20ms
  LOGFORMAT-CALL delay_20ms[1CB]
INSTRUCTION-CALL
   OPERAND1-delay_20ms
  OP1 VALUE-1CB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait more that 15ms for display to be ready
    ADDRESS-219
      LABEL-
  FORMATTED-LOAD s4, 30
  LOGFORMAT-LOAD s4, 30
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-30
  OP2 VALUE-30
    COMMENT-
    ADDRESS-21A
      LABEL-
  FORMATTED-CALL LCD_write_inst4
  LOGFORMAT-CALL LCD_write_inst4[1DB]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst4
  OP1 VALUE-1DB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;send '3'
    ADDRESS-21B
      LABEL-
  FORMATTED-CALL delay_20ms
  LOGFORMAT-CALL delay_20ms[1CB]
INSTRUCTION-CALL
   OPERAND1-delay_20ms
  OP1 VALUE-1CB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >4.1ms
    ADDRESS-21C
      LABEL-
  FORMATTED-CALL LCD_write_inst4
  LOGFORMAT-CALL LCD_write_inst4[1DB]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst4
  OP1 VALUE-1DB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;send '3'
    ADDRESS-21D
      LABEL-
  FORMATTED-CALL delay_1ms
  LOGFORMAT-CALL delay_1ms[1C6]
INSTRUCTION-CALL
   OPERAND1-delay_1ms
  OP1 VALUE-1C6
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >100us
    ADDRESS-21E
      LABEL-
  FORMATTED-CALL LCD_write_inst4
  LOGFORMAT-CALL LCD_write_inst4[1DB]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst4
  OP1 VALUE-1DB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;send '3'
    ADDRESS-21F
      LABEL-
  FORMATTED-CALL delay_40us
  LOGFORMAT-CALL delay_40us[1C1]
INSTRUCTION-CALL
   OPERAND1-delay_40us
  OP1 VALUE-1C1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >40us
    ADDRESS-220
      LABEL-
  FORMATTED-LOAD s4, 20
  LOGFORMAT-LOAD s4, 20
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-20
  OP2 VALUE-20
    COMMENT-
    ADDRESS-221
      LABEL-
  FORMATTED-CALL LCD_write_inst4
  LOGFORMAT-CALL LCD_write_inst4[1DB]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst4
  OP1 VALUE-1DB
   OPERAND2-
  OP2 VALUE-
    COMMENT-;send '2'
    ADDRESS-222
      LABEL-
  FORMATTED-CALL delay_40us
  LOGFORMAT-CALL delay_40us[1C1]
INSTRUCTION-CALL
   OPERAND1-delay_40us
  OP1 VALUE-1C1
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >40us
    ADDRESS-223
      LABEL-
  FORMATTED-LOAD s5, 28
  LOGFORMAT-LOAD s5, 28
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-28
  OP2 VALUE-28
    COMMENT-;Function set
    ADDRESS-224
      LABEL-
  FORMATTED-CALL LCD_write_inst8
  LOGFORMAT-CALL LCD_write_inst8[1DF]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst8
  OP1 VALUE-1DF
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-225
      LABEL-
  FORMATTED-LOAD s5, 06
  LOGFORMAT-LOAD s5, 06
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-06
  OP2 VALUE-06
    COMMENT-;Entry mode
    ADDRESS-226
      LABEL-
  FORMATTED-CALL LCD_write_inst8
  LOGFORMAT-CALL LCD_write_inst8[1DF]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst8
  OP1 VALUE-1DF
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-227
      LABEL-
  FORMATTED-LOAD s5, 0C
  LOGFORMAT-LOAD s5, 0C
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-0C
  OP2 VALUE-0C
    COMMENT-;Display control
    ADDRESS-228
      LABEL-
  FORMATTED-CALL LCD_write_inst8
  LOGFORMAT-CALL LCD_write_inst8[1DF]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst8
  OP1 VALUE-1DF
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-229
      LABEL-LCD_clear
  FORMATTED-LOAD s5, 01
  LOGFORMAT-LOAD s5, 01
INSTRUCTION-LOAD
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;Display clear
    ADDRESS-22A
      LABEL-
  FORMATTED-CALL LCD_write_inst8
  LOGFORMAT-CALL LCD_write_inst8[1DF]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst8
  OP1 VALUE-1DF
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-22B
      LABEL-
  FORMATTED-CALL delay_1ms
  LOGFORMAT-CALL delay_1ms[1C6]
INSTRUCTION-CALL
   OPERAND1-delay_1ms
  OP1 VALUE-1C6
   OPERAND2-
  OP2 VALUE-
    COMMENT-;wait >1.64ms for display to clear
    ADDRESS-22C
      LABEL-
  FORMATTED-CALL delay_1ms
  LOGFORMAT-CALL delay_1ms[1C6]
INSTRUCTION-CALL
   OPERAND1-delay_1ms
  OP1 VALUE-1C6
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-22D
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Position the cursor ready for characters to be written.
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The display is formed of 2 lines of 16 characters and each
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;position has a corresponding address as indicated below.
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;                   Character position
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;           0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Line 1 - 80 81 82 83 84 85 86 87 88 89 8A 8B 8C 8D 8E 8F
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Line 2 - C0 C1 C2 C3 C4 C5 C6 C7 C8 C9 CA CB CC CD CE CF
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;This routine will set the cursor position using the value provided
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;in register s5. The upper nibble will define the line and the lower
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;nibble the character position on the line.
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Example s5 = 2B will position the cursor on line 2 position 11
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Registers used s0, s1, s2, s3, s4
    ADDRESS-22E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-22E
      LABEL-LCD_cursor
  FORMATTED-TEST s5, 10
  LOGFORMAT-TEST s5, 10
INSTRUCTION-TEST
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-10
  OP2 VALUE-10
    COMMENT-;test for line 1
    ADDRESS-22F
      LABEL-
  FORMATTED-JUMP Z, set_line2
  LOGFORMAT-JUMP Z, set_line2[234]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-set_line2
  OP2 VALUE-234
    COMMENT-
    ADDRESS-230
      LABEL-
  FORMATTED-AND s5, 0F
  LOGFORMAT-AND s5, 0F
INSTRUCTION-AND
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-0F
  OP2 VALUE-0F
    COMMENT-;make address in range 80 to 8F for line 1
    ADDRESS-231
      LABEL-
  FORMATTED-OR s5, 80
  LOGFORMAT-OR s5, 80
INSTRUCTION-OR
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-
    ADDRESS-232
      LABEL-
  FORMATTED-CALL LCD_write_inst8
  LOGFORMAT-CALL LCD_write_inst8[1DF]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst8
  OP1 VALUE-1DF
   OPERAND2-
  OP2 VALUE-
    COMMENT-;instruction write to set cursor
    ADDRESS-233
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-234
      LABEL-set_line2
  FORMATTED-AND s5, 0F
  LOGFORMAT-AND s5, 0F
INSTRUCTION-AND
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-0F
  OP2 VALUE-0F
    COMMENT-;make address in range C0 to CF for line 2
    ADDRESS-235
      LABEL-
  FORMATTED-OR s5, C0
  LOGFORMAT-OR s5, C0
INSTRUCTION-OR
   OPERAND1-s5
  OP1 VALUE-s5
   OPERAND2-C0
  OP2 VALUE-C0
    COMMENT-
    ADDRESS-236
      LABEL-
  FORMATTED-CALL LCD_write_inst8
  LOGFORMAT-CALL LCD_write_inst8[1DF]
INSTRUCTION-CALL
   OPERAND1-LCD_write_inst8
  OP1 VALUE-1DF
   OPERAND2-
  OP2 VALUE-
    COMMENT-;instruction write to set cursor
    ADDRESS-237
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Interrupt Service Routine (ISR)
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Interrupts occur at 1 second intervals.
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; HAVE TO CHANGE FROM 1Hz to XYZkHz.
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;;;;;;;;;;;;;;;;;;;thejas;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Each interrupt is used to take analogue samples and store them in scratch pad memory.
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;The interrupt clears a 'flag' in register sF so that the main program can advance.
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Each interrupt is the fundamental timing trigger used to set the sample rate and
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;it is therefore use to set the D/A outputs by copying the values stored in
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;scratch pad memory and outputting them to the D/A converter using the SPI bus.
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Because the SPI communication is in itself a predictable process, the sample rate
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;is preserved without sample jitter. All variable activities are left to the main
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;program.
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Each time PicoBlaze transmits a 32-bit command word to the D/A converter, the
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;D/A responds with the last command it was sent. So as the end of this service routine
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;the register set [s9,s8,s7,s6] will contain the command which has just been sent
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;for the setting of channel C.
    ADDRESS-238
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-238
      LABEL-ISR
  FORMATTED-CALL adc_read
  LOGFORMAT-CALL adc_read[122]
INSTRUCTION-CALL
   OPERAND1-adc_read
  OP1 VALUE-122
   OPERAND2-
  OP2 VALUE-
    COMMENT-;read A/D Converter
    ADDRESS-239
      LABEL-
  FORMATTED-STORE s8, ADC0_lsb
  LOGFORMAT-STORE s8, ADC0_lsb[00]
INSTRUCTION-STORE
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-ADC0_lsb
  OP2 VALUE-00
    COMMENT-;store ADC Channel 0
    ADDRESS-23A
      LABEL-
  FORMATTED-STORE s9, ADC0_msb
  LOGFORMAT-STORE s9, ADC0_msb[01]
INSTRUCTION-STORE
   OPERAND1-s9
  OP1 VALUE-s9
   OPERAND2-ADC0_msb
  OP2 VALUE-01
    COMMENT-
    ADDRESS-23B
      LABEL-
  FORMATTED-STORE s6, ADC1_lsb
  LOGFORMAT-STORE s6, ADC1_lsb[02]
INSTRUCTION-STORE
   OPERAND1-s6
  OP1 VALUE-s6
   OPERAND2-ADC1_lsb
  OP2 VALUE-02
    COMMENT-;store ADC Channel 1
    ADDRESS-23C
      LABEL-
  FORMATTED-STORE s7, ADC1_msb
  LOGFORMAT-STORE s7, ADC1_msb[03]
INSTRUCTION-STORE
   OPERAND1-s7
  OP1 VALUE-s7
   OPERAND2-ADC1_msb
  OP2 VALUE-03
    COMMENT-
    ADDRESS-23D
      LABEL-
  FORMATTED-OUTPUT s8, LED_port
  LOGFORMAT-OUTPUT s8, LED_port[80]
INSTRUCTION-OUTPUT
   OPERAND1-s8
  OP1 VALUE-s8
   OPERAND2-LED_port
  OP2 VALUE-80
    COMMENT-
    ADDRESS-23E
      LABEL-
  FORMATTED-OUTPUT s9, LED_port
  LOGFORMAT-OUTPUT s9, LED_port[80]
INSTRUCTION-OUTPUT
   OPERAND1-s9
  OP1 VALUE-s9
   OPERAND2-LED_port
  OP2 VALUE-80
    COMMENT-;theja: sending to the wrapper verilog
    ADDRESS-23F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-23F
      LABEL-
  FORMATTED-LOAD sF, 00
  LOGFORMAT-LOAD sF, 00
INSTRUCTION-LOAD
   OPERAND1-sF
  OP1 VALUE-sF
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;clear flag
    ADDRESS-240
      LABEL-
  FORMATTED-RETURNI ENABLE
  LOGFORMAT-RETURNI ENABLE
INSTRUCTION-RETURNI
   OPERAND1-ENABLE
  OP1 VALUE-ENABLE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-241
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-241
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-241
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-241
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Interrupt Vector
    ADDRESS-241
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;**************************************************************************************
    ADDRESS-241
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-3FF
      LABEL-
  FORMATTED-ADDRESS 3FF
  LOGFORMAT-ADDRESS 3FF
INSTRUCTION-ADDRESS
   OPERAND1-3FF
  OP1 VALUE-3FF
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-3FF
      LABEL-
  FORMATTED-JUMP ISR
  LOGFORMAT-JUMP ISR[238]
INSTRUCTION-JUMP
   OPERAND1-ISR
  OP1 VALUE-238
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-3FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-3FF
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
